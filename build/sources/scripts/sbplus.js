function MenuBar(t,e){this.$id=$("#"+t),this.$rootItems=this.$id.children("li"),this.$items=this.$id.find(".menu-item").not(".separator"),this.$parents=this.$id.find(".menu-parent"),this.$allItems=this.$parents.add(this.$items),this.$activeItem=null,this.vmenu=e,this.bChildOpen=!1,this.keys={tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40},this.bindHandlers()}MenuBar.prototype.bindHandlers=function(){var t=this;this.$items.on("mouseenter",function(){return $(this).addClass("menu-hover"),!0}),this.$items.on("mouseout",function(){return $(this).removeClass("menu-hover"),!0}),this.$allItems.on("click",function(){return t.handleClick($(this))}),this.$allItems.on("keydown",function(e){return t.handleKeydown($(this),e)}),this.$allItems.on("keypress",function(e){return t.handleKeypress($(this),e)}),this.$allItems.on("focus",function(e){return t.handleFocus($(this),e)}),this.$allItems.on("blur",function(e){return t.handleBlur($(this),e)}),$(document).on("click",function(e){return t.handleDocumentClick(e)})},MenuBar.prototype.handleMouseEnter=function(t){return t.addClass("menu-hover").attr("aria-expanded","true"),"true"===t.attr("aria-haspopup")&&t.children("ul").attr({"aria-hidden":"false","aria-expanded":"true"}),!0},MenuBar.prototype.handleMouseOut=function(t){return t.removeClass("menu-hover").attr("aria-expanded","false"),!0},MenuBar.prototype.handleMouseLeave=function(t){var e=t.find(".menu-focus");return t.removeClass("menu-hover").attr("aria-expanded","false"),e.length>0&&(this.bChildOpen=!1,e.removeClass("menu-focus"),this.$activeItem=t,t.focus()),t.children("ul").attr({"aria-hidden":"true","aria-expanded":"false"}),!0},MenuBar.prototype.handleClick=function(t){var e=t.parent();if(e.is(".root-level")){var s=t.children("ul").first();"false"===s.attr("aria-hidden")?(t.attr("aria-expanded","false"),s.attr({"aria-hidden":"true","aria-expanded":"false"})):(t.attr("aria-expanded","true"),s.attr({"aria-hidden":"false","aria-expanded":"true"}))}else this.$allItems.removeClass("menu-hover menu-focus"),t.attr("aria-expanded","false"),this.$id.find("ul").not(".root-level").attr({"aria-hidden":"true","aria-expanded":"false"})},MenuBar.prototype.handleFocus=function(t){if(null===this.$activeItem)this.$activeItem=t;else if(t[0]!==this.$activeItem[0])return!0;var e=this.$activeItem.parentsUntil("div").filter("li");if(this.$allItems.removeClass("menu-focus"),this.$activeItem.addClass("menu-focus"),e.addClass("menu-focus"),this.vmenu===!0)if(this.bChildOpen===!0){var s=t.parent();s.is(".root-level")&&"true"===t.attr("aria-haspopup")&&(t.attr("aria-expanded","true"),t.children("ul").attr({"aria-hidden":"false","aria-expanded":"true"}))}else this.vmenu=!1;return!0},MenuBar.prototype.handleBlur=function(t){return t.removeClass("menu-focus"),!0},MenuBar.prototype.handleKeydown=function(t,e){if(e.altKey||e.ctrlKey)return!0;var s=t.parent();switch(e.keyCode){case this.keys.tab:t.attr("aria-expanded","false"),this.$id.find("ul").attr({"aria-hidden":"true","aria-expanded":"false"}),this.$allItems.removeClass("menu-focus"),this.$activeItem=null,this.bChildOpen=!1;break;case this.keys.esc:return t.attr("aria-expanded","false"),s.is(".root-level")?t.children("ul").first().attr({"aria-hidden":"true","aria-expanded":"false"}):(this.$activeItem=s.parent(),this.bChildOpen=!1,this.$activeItem.focus(),s.attr({"aria-hidden":"true","aria-expanded":"false"})),e.stopPropagation(),!1;case this.keys.enter:case this.keys.space:var i=t.parent();if(i.is(".root-level"))t.children("ul").first().attr({"aria-hidden":"false","aria-expanded":"true"});else{this.$allItems.removeClass("menu-hover menu-focus"),this.$id.find("ul").not(".root-level").attr({"aria-hidden":"true","aria-expanded":"false"});var a=this.$activeItem.find("a").attr("id");document.getElementById(a).click(),this.$activeItem=null}return e.stopPropagation(),!1;case this.keys.left:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveUp(t):this.$activeItem=this.moveToPrevious(t),this.$activeItem.focus(),e.stopPropagation(),!1;case this.keys.right:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveDown(t):this.$activeItem=this.moveToNext(t),this.$activeItem.focus(),e.stopPropagation(),!1;case this.keys.up:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveToPrevious(t):this.$activeItem=this.moveUp(t),this.$activeItem.focus(),e.stopPropagation(),!1;case this.keys.down:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveToNext(t):this.$activeItem=this.moveDown(t),this.$activeItem.focus(),e.stopPropagation(),!1}return!0},MenuBar.prototype.moveToNext=function(t){var e=t.parent(),s=e.children("li"),i=s.length,a=s.index(t),n=null,r=null;if(e.is(".root-level"))n=a<i-1?t.next():s.first(),"true"===t.attr("aria-haspopup")&&(r=t.children("ul").first(),"false"===r.attr("aria-hidden")&&(t.attr("aria-expanded","false"),r.attr({"aria-hidden":"true","aria-expanded":"false"}),this.bChildOpen=!0)),t.removeClass("menu-focus"),"true"===n.attr("aria-haspopup")&&this.bChildOpen===!0&&(r=n.children("ul").first(),t.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"}));else if("true"===t.attr("aria-haspopup"))r=t.children("ul").first(),n=r.children("li").first(),t.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"});else{if(this.vmenu===!0)return t;var o=null,l=null;o=t.parentsUntil("div").filter("ul").not(".root-level"),t.attr("aria-expanded","false"),o.attr({"aria-hidden":"true","aria-expanded":"false"}),o.find("li").removeClass("menu-focus"),o.last().parent().removeClass("menu-focus"),l=o.last().parent(),a=this.$rootItems.index(l),n=a<this.$rootItems.length-1?l.next():this.$rootItems.first(),n.addClass("menu-focus"),"true"===n.attr("aria-haspopup")&&(r=n.children("ul").first(),n=r.children("li").first(),t.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"}),this.bChildOpen=!0)}return n},MenuBar.prototype.moveToPrevious=function(t){var e=t.parent(),s=e.children("li"),i=s.index(t),a=null,n=null;if(e.is(".root-level"))a=i>0?t.prev():s.last(),"true"===t.attr("aria-haspopup")&&(n=t.children("ul").first(),"false"===n.attr("aria-hidden")&&(t.attr("aria-expanded","false"),n.attr({"aria-hidden":"true","aria-expanded":"false"}),this.bChildOpen=!0)),t.removeClass("menu-focus"),"true"===a.attr("aria-haspopup")&&this.bChildOpen===!0&&(n=a.children("ul").first(),t.attr("aria-expanded","true"),n.attr({"aria-hidden":"false","aria-expanded":"true"}));else{var r=e.parent(),o=r.parent();this.vmenu!==!0&&o.is(".root-level")?(t.attr("aria-expanded","false"),e.attr({"aria-hidden":"true","aria-expanded":"false"}),t.removeClass("menu-focus"),r.removeClass("menu-focus"),i=this.$rootItems.index(r),a=i>0?r.prev():this.$rootItems.last(),a.addClass("menu-focus"),"true"===a.attr("aria-haspopup")&&(n=a.children("ul").first(),t.attr("aria-expanded","true"),n.attr({"aria-hidden":"false","aria-expanded":"true"}),this.bChildOpen=!0,a=n.children("li").first())):(a=e.parent(),t.attr("aria-expanded","false"),e.attr({"aria-hidden":"true","aria-expanded":"false"}),t.removeClass("menu-focus"),this.vmenu===!0&&(this.bChildOpen=!1))}return a},MenuBar.prototype.moveDown=function(t,e){var s=t.parent(),i=s.children("li").not(".separator"),a=i.length,n=i.index(t),r=null,o=null;if(s.is(".root-level"))return"true"!==t.attr("aria-haspopup")?t:(o=t.children("ul").first(),r=o.children("li").first(),$(o.parent()).attr("aria-expanded","true"),t.attr("aria-expanded","true"),o.attr({"aria-hidden":"false","aria-expanded":"true"}),r);if(e){var l=!1,u=n+1;for(u===a&&(u=0);u!==n;){var h=i.eq(u).html().charAt(0);if(h.toLowerCase()===e){l=!0;break}u+=1,u===a&&(u=0)}return l===!0?(r=i.eq(u),t.removeClass("menu-focus"),r):t}return r=n<a-1?i.eq(n+1):i.first(),t.removeClass("menu-focus"),r},MenuBar.prototype.moveUp=function(t){var e=t.parent(),s=e.children("li").not(".separator"),i=s.index(t),a=null;return e.is(".root-level")?t:(a=i>0?s.eq(i-1):s.last(),t.removeClass("menu-focus"),a)},MenuBar.prototype.handleKeypress=function(t,e){if(e.altKey||e.ctrlKey||e.shiftKey)return!0;switch(e.keyCode){case this.keys.tab:return!0;case this.keys.esc:case this.keys.up:case this.keys.down:case this.keys.left:case this.keys.right:return e.stopPropagation(),!1;default:var s=String.fromCharCode(e.which);return this.$activeItem=this.moveDown(t,s),this.$activeItem.focus(),e.stopPropagation(),!1}},MenuBar.prototype.handleDocumentClick=function(){return this.$allItems.removeClass("menu-focus"),this.$activeItem=null,!0};var SBPLUS=SBPLUS||{layout:null,splash:null,banner:null,tableOfContents:null,widget:null,button:null,menu:null,manifest:null,manifestLoaded:!1,manifestOptionsLoaded:!1,templateLoaded:!1,xml:null,xmlLoaded:!1,xmlParsed:!1,presentationRendered:!1,beforePresentingDone:!1,presentationStarted:!1,hasError:!1,go:function(){if(null!==this.manifest)return"Storybook Plus is already in ready state.";var t=this;this.layout={isMobile:!1,html:"html",wrapper:".sbplus_wrapper",sbplus:"#sbplus",errorScreen:"#sbplus_error_screen",widget:"#sbplus_widget",media:"#sbplus_media_wrapper",sidebar:"#sbplus_right_col",dwnldMenu:null},this.banner={title:"#sbplus_lession_title",author:"#sbplus_author_name"},this.splash={screen:"#sbplus_splash_screen",title:"#sbplus_presentation_info .sb_title",subtitle:"#sbplus_presentation_info .sb_subtitle",author:"#sbplus_presentation_info .sb_author",duration:"#sbplus_presentation_info .sb_duration"},this.tableOfContents={header:".section .header",page:".section .list .item"},this.widget={bar:"#sbplus_widget .tab_segment",segment:"#sbplus_widget button",segments:[]},this.button={start:"#sbplus_start_btn",resume:"#sbplus_resume_btn",download:"#sbplus_download_btn",widget:"#sbplus_widget_btn",sidebar:"#sbplus_sidebar_btn",author:"#sbplus_author_name",menu:"#sbplus_menu_btn"},this.menu={menuPanel:"#sbplus_menu_items_wrapper",menuBar:"#sbplus_sub_bar",menuList:"#sbplus_menu_items_wrapper .list",menuItem:"#sbplus_menu_items_wrapper .menu.item",menuContentWrapper:"#menu_item_content",menuContent:"#menu_item_content .content"},$.getJSON(this.getManifestUrl(),function(e){t.manifestLoaded=!0,t.manifest=e,t.loadTemplate()}).fail(function(){var e='<div class="error">';e+="<p><strong>Storybook Plus Error:</strong> ",e+="failed to load the manifest file.<br>",e+="Expecting: <code>"+this.url+"</code></p>",e+="</div>",$(t.layout.wrapper).html(e)})},loadTemplate:function(){if(!this.manifestLoaded||this.templateLoaded!==!1)return"Storybook Plus template already loaded.";var t=this,e=this.manifest.sbplus_root_directory;e+="scripts/templates/sbplus.tpl",$.get(e,function(e){return t.templateLoaded=!0,$(t.layout.wrapper).html(e),t.beforePresenting(),0===t.checkForSupport()?(t.hasError=!0,t.showErrorScreen("support"),!1):(t.loadXML(),void $(window).on("resize",t.resize.bind(t)))}).fail(function(){var e='<div class="error">';e+="<p><strong>Storybook Plus Error:</strong> ",e+="failed to load template.<br>",e+="Expecting: <code>"+this.url+"</code></p>",e+="</div>",$(t.layout.wrapper).html(e)})},beforePresenting:function(){if(this.manifestLoaded&&this.templateLoaded&&this.beforePresentingDone===!1){this.beforePresentingDone=!0,this.resize(),this.setURLOptions();var t=$(this.tableOfContents.header);1===t.length&&t.hide().off("click"),this.setManifestOptions()}},loadXML:function(){if(this.beforePresentingDone!==!0||this.xmlLoaded!==!1)return"XML already loaded.";var t=this,e="assets/sbplus.xml";$.get(e,function(e){t.xmlLoaded=!0,t.parseXMLData(e)}).fail(function(e,s){t.hasError=!0,"parsererror"===s?t.showErrorScreen("parser"):t.showErrorScreen("xml")})},parseXMLData:function(t){if(!this.xmlLoaded||this.xmlParsed!==!1)return"XML already parsed.";var e=this,s=$(t),i=s.find("storybook"),a=s.find("setup"),n=i.attr("accent").trim(),r=i.attr("pageImgFormat").toLowerCase().trim(),o=i.attr("analytics").toLowerCase().trim(),l=i.attr("mathjax").toLowerCase().trim(),u=i.attr("xmlVersion"),h=a.attr("program").toLowerCase().trim(),d=a.attr("course").toLowerCase().trim(),p=a.find("title").text().trim(),c=a.find("subtitle").text().trim(),m=a.find("length").text().trim(),f=a.find("author"),b=a.find("generalInfo").text().trim(),_=s.find("section");this.isEmpty(n)&&(n="#0c3b6b"),this.isEmpty(r)&&(r="jpg"),"on"!==o&&(o="off"),"on"!==l&&(l="off"),this.xml={settings:{accent:n,imgType:r,analytics:o,mathjax:l,version:u},setup:{program:h,course:d,title:p,subtitle:c,authorPhoto:"",duration:m,generalInfo:b},sections:_};var v=this.sanitize(f.attr("name").trim()),g=this.manifest.sbplus_author_directory+v+".json";$.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",jsonpCallback:"author",url:g}).done(function(t){e.xml.setup.author=t.name,e.xml.setup.profile=t.profile}).fail(function(){e.xml.setup.author=f.attr("name").trim(),e.xml.setup.profile=f.text().trim()}).always(function(){e.xmlParsed=!0,e.renderPresentation()})},renderPresentation:function(){if(!this.xmlParsed||this.presentationRendered!==!1)return"Presentation already rendered.";var t=this,e=".sbplus_wrapper #sbplus #sbplus_splash_screen #sbplus_presentation_info .sb_cta button, ";e+=".sbplus_wrapper #sbplus #sbplus_content_wrapper #sbplus_left_col #sbplus_widget .tab_segment .active,",e+=".sbplus_wrapper #sbplus #sbplus_content_wrapper #sbplus_right_col .list .sb_selected,",e+=".sbplus_wrapper #sbplus #sbplus_banner_bar, .sbplus_wrapper #sbplus #sbplus_banner_bar #sbplus_menu_area #sbplus_author_name {",e+="color: "+this.colorContrast(this.xml.settings.accent)+";",e+="background-color:"+this.xml.settings.accent+";",e+="border-color:"+this.xml.settings.accent+";}",e+=".sbplus_wrapper #sbplus #sbplus_splash_screen #sbplus_presentation_info .sb_cta button:hover,",e+=".sbplus_wrapper #sbplus #sbplus_content_wrapper #sbplus_right_col .list .item:hover,",e+=".sbplus_wrapper #sbplus #sbplus_banner_bar #sbplus_menu_area #sbplus_menu_btn,",e+=".sbplus_wrapper #sbplus #sbplus_control_bar #sbplus_right_controls #sbplus_download_btn_wrapper #sbplus_download_btn .menu-parent .menu .menu-item:hover, .sbplus_wrapper #sbplus #sbplus_control_bar #sbplus_right_controls #sbplus_download_btn_wrapper .root-level .menu-parent .menu .menu-item:hover {",e+="background-color: "+this.colorLum(this.xml.settings.accent,.2)+"}",e+=".sbplus_wrapper button:hover, .sbplus_wrapper #sbplus .sb_active, ",e+=".sbplus_wrapper #sbplus #sbplus_control_bar #sbplus_right_controls #sbplus_download_btn_wrapper #sbplus_download_btn .menu-parent:hover, .sbplus_wrapper #sbplus #sbplus_control_bar #sbplus_right_controls #sbplus_download_btn_wrapper .root-level .menu-parent:hover {",e+="color: "+this.colorLum(this.xml.settings.accent,.2)+";}",e+=".sbplus_wrapper #sbplus #sbplus_content_wrapper #sbplus_left_col #sbplus_widget .tab_segment button, ",e+=".sbplus_wrapper #sbplus #sbplus_splash_screen #sbplus_presentation_info .sb_downloads a {",e+="border-color: "+this.xml.settings.accent+"; color: "+this.xml.settings.accent+";}",e+=".sbplus_wrapper #sbplus #sbplus_splash_screen #sbplus_presentation_info .sb_downloads a:hover{",e+=" background-color: "+this.xml.settings.accent+";}",e+=".sbplus_wrapper #sbplus #sbplus_content_wrapper #sbplus_right_col #sbplus_table_of_contents_wrapper .section .current,",e+=".sbplus_wrapper #sbplus #sbplus_splash_screen #sbplus_presentation_info .sb_downloads a:first-child {",e+="border-color: "+this.xml.settings.accent+";}",$("head").append('<style type="text/css">'+e+"</style>"),$(this.splash.title).html(this.xml.setup.title),$(this.splash.subtitle).html(this.xml.setup.subtitle),$(this.splash.author).html(this.xml.setup.author),$(this.splash.duration).html(this.xml.setup.duration),$(this.banner.title).html(this.xml.setup.title),$(this.banner.author).html(this.xml.setup.author),$(this.button.sidebar).on("click",this.toggleSidebar.bind(this)),$(this.button.widget).on("click",this.toggleWidget.bind(this)),$(this.button.menu).on("click",this.toggleMenu.bind(this)),$(this.button.author).on("click",function(){t.openMenuItem("sbplus_author_profile")}),$(this.button.start).on("click",this.startPresentation.bind(this)),$(this.button.resume).on("click",this.resumePresentation.bind(this)),$(this.tableOfContents.header).on("click",this.toggleSection.bind(this)),$(this.tableOfContents.page).on("click",this.selectPage.bind(this)),$(this.widget.segment).on("click",this.changeSegment.bind(this)),this.layout.dwnldMenu=new MenuBar($(this.button.download)[0].id,!1),"on"===this.xml.settings.mathjax&&$.getScript("https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!0}})})},hideSplash:function(){$(this.splash.screen).addClass("fadeOut").one("webkitAnimationEnd mozAnimationEnd animationend",function(){$(this).removeClass("fadeOut").hide(),$(this).off()})},startPresentation:function(){this.presentationStarted===!1&&(this.hideSplash(),this.presentationStarted=!0)},resumePresentation:function(){this.presentationStarted===!1&&(this.hideSplash(),this.presentationStarted=!0)},toggleSidebar:function(){$(this.layout.sidebar).is(":visible")?this.hideSidebar():this.showSidebar()},hideSidebar:function(){var t=$(this.layout.widget),e=$(this.layout.media);$(this.layout.sidebar).hide(),$(this.button.sidebar).removeClass("sb_active"),t.is(":visible")&&t.outerHeight()<=190&&e.removeClass("aspect_ratio").addClass("non_aspect_ratio")},showSidebar:function(){var t=$(this.layout.widget),e=$(this.layout.media);$(this.layout.sidebar).show(),$(this.button.sidebar).addClass("sb_active"),t.is(":visible")&&t.outerHeight()<=190&&e.removeClass("non_aspect_ratio").addClass("aspect_ratio")},toggleSection:function(t){var e=$(this.tableOfContents.header).length;if(e>1){var s;if(t instanceof Object)s=$(t.currentTarget);else{if(Number(t)>e-1)return!1;s=$(".header:eq("+t+")")}var i=$(s.siblings(".list")),a=s.find(".icon");i.is(":visible")?(i.slideUp(),a.html('<span class="icon-open"></span>')):(i.slideDown(),a.html('<span class="icon-collapse"></span>'))}},selectPage:function(t){var e;if(t instanceof Object)e=$(t.currentTarget);else if(e=$('.item[data-page="'+t+'"]'),0===e.length)return!1;if($(this.splash.screen).is(":visible")&&this.hideSplash(),!e.hasClass("sb_selected")){var s=$(this.tableOfContents.page),i=$(this.tableOfContents.header);if(i.length>1){var a=e.parent().siblings(".header");a.hasClass("current")||(i.removeClass("current"),a.addClass("current"))}s.removeClass("sb_selected"),e.addClass("sb_selected")}},toggleMenu:function(){$(this.menu.menuPanel).is(":visible")?this.hideMenu():this.showMenu()},showMenu:function(){$(this.layout.sidebar).is(":visible")||this.showSidebar();var t=$(this.menu.menuPanel);$(this.button.menu).html('<span class="icon-close"></span>').css({color:"#f00","padding-top":"4px"}),$(this.menu.menuBar).find(".title").html("Menu"),t.show().addClass("slideInRight").one("webkitAnimationEnd mozAnimationEnd animationend",function(){$(this).removeClass("slideInRight"),$(this).off()}),$(this.menu.menuItem).on("click",this.openMenuItem.bind(this))},hideMenu:function(){var t=this,e=$(this.menu.menuPanel),s=$(this.menu.menuBar);$(this.button.menu).html("Menu").css({color:"","padding-top":""}),s.find(".title").html("Table of Contents"),e.addClass("slideOutRight").one("webkitAnimationEnd mozAnimationEnd animationend",function(){e.hide().removeClass("slideOutRight"),t.resetMenu(),$(this).off()})},openMenuItem:function(t){var e=this;$(this.splash.screen).is(":visible")&&this.hideSplash(),$(this.menu.menuPanel).is(":visible")||this.showMenu();var s="";s="string"==typeof t?t:t.currentTarget.id;var i=$(this.menu.menuBar),a=$(this.menu.menuList),n=$(this.menu.menuContentWrapper),r=$(this.menu.menuContent),o=$("#"+s),l=i.find(".backBtn");i.removeClass("full"),i.find(".title").html(o.html()),n.is(":visible")?a.off():(a.hasClass("fadeOutLeft")||a.addClass("fadeOutLeft"),a.one("webkitAnimationEnd mozAnimationEnd animationend",function(){$(this).hide().removeClass("fadeOutLeft");var t="";switch(s){case"sbplus_author_profile":if(0===e.xml.setup.authorPhoto.length){var i=e.xml.setup.author,a=e.sanitize(i),o=e.manifest.sbplus_author_directory+a+".jpg";$.ajax({type:"HEAD",url:"assets/"+a+".jpg"}).done(function(){e.xml.setup.authorPhoto=this.url;var t='<div class="profileImg"><img src="';t+=this.url+'" alt="Photo of '+i+'" /></div>',n.prepend(t)}).fail(function(){$.ajax({type:"HEAD",url:o}).done(function(){e.xml.setup.authorPhoto=this.url;var t='<div class="profileImg"><img src="';t+=this.url+'" alt="Photo of '+i+'" /></div>',n.prepend(t)}).fail(function(){e.xml.setup.authorPhoto=e.manifest.sbplus_root_directory,e.xml.setup.authorPhoto+="images/default_photo.png";var t='<div class="profileImg"><img src="';t+=e.xml.setup.authorPhoto+'" alt="No Photo" /><div>',n.prepend(t)})})}else{var l='<div class="profileImg"><img src="';l+=e.xml.setup.authorPhoto+'" alt="No Photo" /><div>',n.prepend(l)}t='<p class="author">'+e.xml.setup.author+"</p>",t+=e.xml.setup.profile;break;case"sbplus_general_info":t=e.xml.setup.generalInfo;break;case"sbplus_settings":t="<p>Settings go here...</p>";break;default:var u=e.manifest.sbplus_custom_menu_items;for(var h in u){var d="sbplus_"+e.sanitize(u[h].name);if(s===d){t=u[h].content;break}}}n.fadeIn(),r.append(t),"on"===e.xml.settings.mathjax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),$(this).off()}),l.show().prop("disabled",!1).one("click",function(){i.addClass("full").find(".title").html("Menu"),a.show(),a.hasClass("fadeInLeft")||a.addClass("fadeInLeft"),a.one("webkitAnimationEnd mozAnimationEnd animationend",function(){$(this).removeClass("fadeInLeft"),$(this).off()}),n.hide().html('<div class="content"></div>'),$(this).prop("disabled",!0),$(this).off("click")}))},resetMenu:function(){if(!$(this.menu.menuPanel).is(":visible")){var t=$(this.menu.menuBar);t.find(".title").html("Table of Contents"),t.addClass("full"),t.find(".backBtn").hide().prop("disabled",!0),$(this.menu.menuList).show(),$(this.menu.menuContentWrapper).hide().html('<div class="content"></div>'),$(this.menu.menuItem).off("click")}},toggleWidget:function(){$(this.layout.widget).is(":visible")?this.hideWidget():this.showWidget()},hideWidget:function(){var t=$(this.layout.media);$(this.layout.widget).hide(),$(this.button.widget).removeClass("sb_active"),this.layout.isMobile?(t.addClass("aspect_ratio"),this.resize()):t.removeClass("aspect_ratio").addClass("non_aspect_ratio").css("height","100%")},showWidget:function(){$(this.layout.widget).show(),$(this.button.widget).addClass("sb_active"),$(this.layout.media).removeClass("non_aspect_ratio").addClass("aspect_ratio").css("height",""),this.resize()},changeSegment:function(t){var e=$(this.widget.segment),s=$(t.currentTarget);e.removeClass("active"),s.addClass("active")},addSegment:function(t){var e='<button id="'+this.sanitize(t)+'">'+t+"</button>";this.widget.segments.push(t),$(this.widget.bar).append(e)},setManifestOptions:function(){if(this.manifestOptionsLoaded!==!1)return"Manifest options already loaded.";this.manifestOptionsLoaded=!0;var t=this.manifest.sbplus_custom_menu_items;if(t.length)for(var e in t){var s=t[e].name,i=this.sanitize(s),a='<li class="menu item" id="sbplus_'+i+'"><span class="icon-'+i+'"></span> '+s+"</li>";$(this.menu.menuList).append(a)}},checkForSupport:function(){return Modernizr.video&&Modernizr.eventlistener&&Modernizr.json&&Modernizr.flexbox&&Modernizr.flexwrap&&Modernizr.csscalc?1:0},showErrorScreen:function(t){if(this.hasError&&t.length){var e=this.manifest.sbplus_root_directory;switch($(this.layout.sbplus).hide(),t){case"support":e+="scripts/templates/support_error.tpl";break;case"xml":e+="scripts/templates/xml_error.tpl";break;case"parser":e+="scripts/templates/xml_parse_error.tpl";break;default:e=""}if(e.length){var s=this;$.get(e,function(t){$(s.layout.errorScreen).html(t).show().addClass("shake").css("display","flex")})}}},calcLayout:function(){var t=$(this.layout.media),e=$(this.layout.widget),s=$(this.layout.sidebar);window.innerWidth>=1826?t.removeClass("aspect_ratio").addClass("non_aspect_ratio"):t.removeClass("non_aspect_ratio").addClass("aspect_ratio"),e.is(":visible")||t.css("height","100%"),window.innerWidth<=740||window.screen.width<=414?this.layout.isMobile=!0:this.layout.isMobile=!1,this.layout.isMobile===!1&&e.outerHeight()<=190&&t.removeClass("aspect_ratio").addClass("non_aspect_ratio"),this.layout.isMobile===!0?s.css("max-height","400px"):s.css("max-height",""),this.calcWidgetHeight()},calcWidgetHeight:function(){var t=$(this.layout.sidebar),e=$(this.layout.widget);this.layout.isMobile===!0?e.css({"min-height":t.outerHeight(),bottom:t.outerHeight()*-1}):e.css({"min-height":"",bottom:""})},resize:function(){this.calcLayout(),this.layout.isMobile&&this.showSidebar()},setURLOptions:function(){var t=$(this.layout.html),e=$(this.layout.wrapper);"1"===this.getUrlParam("fullview")?(t.addClass("sbplus_pop_full"),e.removeClass("sbplus_boxed").addClass("sbplus_full")):(t.removeClass(".sbplus_pop_full"),e.addClass("sbplus_boxed").removeClass("sbplus_full"))},getUrlParam:function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null===e?null:e[1]||0},getManifestUrl:function(){var t=$("#sbplus_configs");return t.length?t[0].href:""},sanitize:function(t){return t.replace(/[^\w]/gi,"").toLowerCase()},isEmpty:function(t){return void 0===t||!t.trim()||0===t.trim().length},colorLum:function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var s="#",i,a;for(a=0;a<3;a++)i=parseInt(t.substr(2*a,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+=("00"+i).substr(i.length);return s},colorContrast:function(t){return t=parseInt(t.slice(1),16),t>8388607.5?"#000":"#fff"}};$(function(){SBPLUS.go()});
//# sourceMappingURL=./sbplus.js.map