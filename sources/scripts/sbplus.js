var sbplus=function(){function t(){b()?$.get("assets/sbplus.xml",function(t){C.data=$(t),e()}).fail(function(){d("Table of Contents XML file (sbplus.xml) is not found!","Please make sure the XML file exists in the assets directory and compatible with Storybook Plus version 3.")}):$.get(x.sbplus_root_directory+"scripts/templates/nosupport.tpl",function(t){c(t)}).fail(function(){d("Unsuppored web browser!","Your web browser does not support current version of Storybook Plus. In addition, nosupport.tpl file is not found. nosuppory.tpl file contains information to display in regard to unsupported web browsers.")})}function e(){var t=C.data.find("storybook"),e=C.data.find("setup");C.title=e.find("title").text(),C.subtitle=e.find("subtitle").text(),C.author=e.find("author").attr("name"),C.authorBio=e.find("author").text(),C.length=e.find("length").text(),C.generalInfo=e.find("generalInfo").text(),C.postfix=e.attr("postfix"),C.section=C.data.find("section"),_.accent=k(t.attr("accent"))?_.accent:t.attr("accent"),_.slideFormat=k(t.attr("slideFormat"))?_.slideFormat:t.attr("slideFormat"),_.analytics=k(t.attr("analytics"))?_.analytics:t.attr("analytics"),$.get(x.sbplus_root_directory+"scripts/templates/sbplus.tpl",function(t){l(t),n()}).fail(function(){d("Template file not found!","sbplus.tpl file not found in the templates directory.")})}function n(){var t="";$.get(x.sbplus_root_directory+"scripts/templates/splashscreen.tpl",function(e){$.get("assets/splash.jpg",function(){t="assets/splash.jpg"}).fail(function(){$.get(x.sbplus_splash_directory+w()+C.postfix+".jpg",function(){t=this.url}).fail(function(){$.get(x.sbplus_splash_directory+w()+".jpg",function(){t=this.url}).always(function(){r(e,t),a(),o(),f()})})})}).fail(function(){d("Template file not found!","splashscreen.tpl file not found in the templates directory.")})}function o(){$.get(w()+".mp4",function(){C.videoDownloadSrc=this.url}).always(function(){$.get(w()+".mp3",function(){C.audioDownloadSrc=this.url}).always(function(){$.get(w()+".pdf",function(){C.pdfDownloadSrc=this.url}).always(function(){$.get(w()+".zip",function(){C.zipDownloadSrc=this.url}).always(function(){i()})})})})}function a(){$.each(C.section,function(t){var e=$(this).find("page"),n=k($(this).attr("title"))?"Section "+(t+1):$(this).attr("title");$(".tableOfContents").append('<div class="section"><div class="header"><div class="title">'+n+'</div><div class="expandCollapseIcon"><span class="icon-collapse"></span></div></div><div class="content"><ul class="selectable">'),$.each(e,function(e){"quiz"!==$(this).attr("type")?$(".selectable:eq("+t+")").append('<li class="selectee" data-slide="'+e+'"><span class="num">'+(C.trackCount+1)+".</span> "+$(this).attr("title")+"</li>"):$(".selectable:eq("+t+")").append('<li class="selectee" data-slide="'+e+'"><span class="icon-assessment"></span> '+$(this).attr("title")+"</li>"),C.trackCount++}),$(".tableOfContents").append("</ul></div></div>")}),C.section.length>=2?$(".tableOfContents .section .header").on("click",function(){var t=$(this).parent().find(".content"),e=$(this).parent().find(".expandCollapseIcon").find("span");$(t).is(":visible")?t.slideUp(250,function(){$(e).removeClass("icon-collapse").addClass("icon-open")}):t.slideDown(250,function(){$(e).removeClass("icon-open").addClass("icon-collapse")})}):$(".tableOfContents .section .header").remove(),$(".selectable .selectee").on("click",function(){if(C.section.length>=2){var t=$(this).parent().parent().prev();$(".header").removeClass("current"),$(t).addClass("current")}$(".selectable .selectee").removeClass("selected"),$(this).addClass("selected")})}function i(){var t="";"undefined"!=typeof C.videoDownloadSrc&&(t+='<a class="dl_item video" href="'+C.videoDownloadSrc+'" role="button" tabindex="1" aria-label="Download video file" download><span class="icon-download"></span> Video</a> '),"undefined"!=typeof C.audioDownloadSrc&&(t+='<a class="dl_item audio" href="'+C.audioDownloadSrc+'" role="button" tabindex="1" aria-label="Download audio file" download><span class="icon-download"></span> Audio</a> '),"undefined"!=typeof C.pdfDownloadSrc&&(t+='<a class="dl_item pdf" href="'+C.pdfDownloadSrc+'" role="button" tabindex="1" aria-label="Download PDF file" download><span class="icon-download"></span> Transcript</a> '),"undefined"!=typeof C.zipDownloadSrc&&(t+='<a class="dl_item zip" href="'+C.zipDownloadSrc+'" role="button" tabindex="1" aria-label="Download Supplement file" download><span class="icon-download"></span> Supplement</a>'),$(".download_files").hide().html(t).fadeIn(500)}function s(){$(".splashscreen").fadeOut("fast",function(){$(".main_content_wrapper").css("display","flex").fadeIn(500,function(){$(this).removeClass("hide"),$(".title_bar .title").html(C.title),$(".author").html(C.author),h()}),$(this).remove(),p()})}function l(t){$(document).attr("title",C.title),y.html(t)}function r(t,e){$(".splashscreen").html(t),""!==e&&$(".splashscreen").css("background-image","url("+e+")"),$(".splashinfo .title").html(C.title),$(".splashinfo .subtitle").html(C.subtitle),$(".splashinfo .author").html(C.author),$(".splashinfo .length").html(C.length),$(".splashinfo .startBtn").css("background-color",_.accent),navigator.cookieEnabled&&$.fn.checkValueInCookie("sbplus-"+v())&&$(".splashinfo .resumeBtn").css("background-color",_.accent).removeClass("hide")}function c(t){y.html(t)}function d(t,e){y.html('<div class="error"><h1>'+t+"</h1><p>"+e+"</p></div>")}function u(t,e,n){return"undefined"==typeof t?($(".menu_item a").attr("aria-expanded","false"),void $(".menu_item_details").attr("aria-expanded","false").animate({right:"-258px"},250,function(){$(this).addClass("hide")})):($(t).attr("aria-expanded","true"),$(".menu_item_details").attr("aria-expanded","true"),$(".menu_item_details .navbar .title").html(e),$(".menu_item_details .menu_item_content").html(n),void $(".menu_item_details").removeClass("hide").animate({right:"0px"},250))}function f(){$(".splashinfo .startBtn").on("click",s)}function p(){$(".splashinfo .startBtn").off("click")}function h(){$(".menuBtn").on("click",function(){return $(this).attr("aria-expanded","true"),$("#menu_panel").removeClass("hide").attr("aria-expanded","true"),!1}),$(".backBtn").on("click",function(){return u(),!1}),$(".closeBtn").on("click",function(){return $(".menuBtn").attr("aria-expanded","false"),$("#menu_panel").addClass("hide").attr("aria-expanded","false"),u(),!1}),$("#showProfile").on("click",m),$("#showGeneralInfo").on("click",m),$("#showHelp").on("click",m),$("#showSettings").on("click",m)}function m(){var t,e,n="#"+this.id;switch(n){case"#showProfile":t="Author Profile",e=C.authorBio;break;case"#showGeneralInfo":t="General Information",e=C.generalInfo;break;case"#showHelp":t="Help",e="<p>Help information go here...</p>";break;case"#showSettings":t="Settings",e="<p>Settings go here...</p>";break;default:t="",e=""}return""!==t&&""!==e&&u(this,t,e),!1}function b(){return!!(Modernizr.audio&&Modernizr.video&&Modernizr.json&&Modernizr.flexbox)}function g(){var t=document.getElementById("sbplus_configs");return null===t?!1:t.href}function w(){var t=window.location.href.split("/");return(k(t[t.length-1])||new RegExp("[?]").test(t[t.length-1]))&&t.splice(t.length-1,1),void 0===t[4]?t[3]:t[4]}function v(){var t=window.location.href.split("/");return(k(t[t.length-1])||new RegExp("[?]").test(t[t.length-1])||"index.html"===t[t.length-1])&&t.splice(t.length-1,1),t[t.length-1]}function k(t){return!t.trim()||0===t.trim().length}var x,_={accent:"#535cab",slideFormat:"jpg",analytics:"off",xmlVersion:"3",trackCount:0},C={data:"",trackCount:0},y=$(".sbplus_wrapper");$.getJSON(g(),function(e){x=e,t()}).fail(function(){d("Configuration file (manifest.json) is not found!","Please make sure the index.html file is compatible with Storybook Plus version 3.")})};$(function(){sbplus()}),$.fn.setCookie=function(t,e,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toUTCString();document.cookie=t+"="+e+"; "+a},$.fn.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return""},$.fn.deleteCookie=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},$.fn.checkValueInCookie=function(t){var e=$.fn.getCookie(t);return""!==e};