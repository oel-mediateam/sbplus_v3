function MenuBar(e,t){this.$id=$("#"+e),this.$rootItems=this.$id.children("li"),this.$items=this.$id.find(".menu-item").not(".separator"),this.$parents=this.$id.find(".menu-parent"),this.$allItems=this.$parents.add(this.$items),this.$activeItem=null,this.vmenu=t,this.bChildOpen=!1,this.keys={tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40},this.bindHandlers()}var sbplus=function(){function e(){$.fn.haveCoreFeatures()?$.get("assets/sbplus.xml",function(e){c.data=$(e),t()}).fail(function(e,t){"parsererror"===t?sbplusError.show("Something went wrong in the XML!",'Validate the XML at <a href="https://validator.w3.org/" target="_blank">https://validator.w3.org/</a>.'):sbplusError.show("Table of Contents XML file (sbplus.xml) is not found!","Please make sure the XML file exists in the assets directory and compatible with Storybook Plus version 3.")}):$.get(l.sbplus_root_directory+"scripts/templates/nosupport.tpl",function(e){n(e)}).fail(function(){sbplusError.show("Unsupported web browser!","Your web browser does not support current version of Storybook Plus. In addition, nosupport.tpl file is not found. nosuppory.tpl file contains information to display in regard to unsupported web browsers.")})}function t(){var e=c.data.find("storybook"),t=c.data.find("setup");c.title=t.find("title").text(),c.subtitle=t.find("subtitle").text(),c.author=t.find("author").attr("name"),c.length=t.find("length").text(),c.generalInfo=t.find("generalInfo").text(),c.course=t.attr("course"),c.section=c.data.find("section"),u.accent=$.fn.isEmpty(e.attr("accent"))?u.accent:e.attr("accent"),u.pageImgFormat=$.fn.isEmpty(e.attr("pageImgFormat"))?u.pageImgFormat:e.attr("pageImgFormat"),u.analytics=$.fn.isEmpty(e.attr("analytics"))?u.analytics:e.attr("analytics"),$.get(l.sbplus_root_directory+"scripts/templates/sbplus.tpl",function(e){a(e)}).fail(function(){sbplusError.show("Template file not found!","sbplus.tpl file not found in the templates directory.")})}function s(e){e="undefined"!=typeof e,$(".splashscreen").fadeOut("fast",function(){if($(".main_content_wrapper").removeClass("hide"),$(".title_bar .title").html(c.title),$(".author").html(c.author),sbplusTableOfContents.get(c,u),e){var t=$.fn.getLSItem("sbplus-"+$.fn.getRootDirectory()).split(":"),s=Number(t[0]),a=t[1];sbplusSlide.get(c.section,u,s,a,l)}else sbplusSlide.get(c.section,u,0,0,l);sbplusControls.init(c.section,u),sbplusMenu.get(l,c),$(window).resize(function(){o()}),$(window).on("orientationchange",function(){o()}),e&&sbplusSplashScreen.unbindResumePresentationBtn(),sbplusSplashScreen.unbindStartPresentationBtn()})}function a(e){$(document).attr("title",c.title),d.html(e),sbplusSplashScreen.get(l,c,u),Modernizr.localstorage&&i(),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&r()}function n(e){d.html(e)}function i(){$.fn.hasLSItem("sbplus-vjs-autoplay")?$.fn.setLSItem("sbplus-vjs-autoplay",$.fn.getLSItem("sbplus-vjs-autoplay")):$.fn.setLSItem("sbplus-vjs-autoplay",1),$.fn.hasLSItem("sbplus-vjs-volume")?$.fn.setLSItem("sbplus-vjs-volume",$.fn.getLSItem("sbplus-vjs-volume")):$.fn.setLSItem("sbplus-vjs-volume",.8),$.fn.hasLSItem("sbplus-vjs-playbackrate")?$.fn.setLSItem("sbplus-vjs-playbackrate",$.fn.getLSItem("sbplus-vjs-playbackrate")):$.fn.setLSItem("sbplus-vjs-playbackrate",1),$.fn.hasLSItem("sbplus-vjs-enabledSubtitles")?$.fn.setLSItem("sbplus-vjs-enabledSubtitles",$.fn.getLSItem("sbplus-vjs-enabledSubtitles")):$.fn.setLSItem("sbplus-vjs-enabledSubtitles",0)}function r(){$.getScript(l.sbplus_root_directory+"scripts/libs/iphone-inline-video.browser.js")}function o(){var e=$(document).width(),t=$(document).height();if(414>=e&&736>=t);else if(736>=e&&414>=t);else{var s=$(window).outerWidth(),a=$(window).outerHeight(),n=$(".title_bar").outerHeight(),i=$(".control_bar_wrapper").outerHeight(),r=$(".page_container .content").outerHeight(),o=$(".side_panel .topbar").outerHeight(),l=$(".main_content_wrapper").hasClass("full-view"),u=$(".main_content_wrapper").hasClass("assessment-view");if(u){var c=a-n-i;$(".content .assessment").css({height:c+"px"})}if(l){var d=100-(i+n)/a*100;$(".page_container.expanded").css("height",d+"%"),$(".widget_container .notes").css({height:"",width:$(".status").outerWidth()+"px"}),$(".widget_container .side_panel").css({top:-1*(a-i-n)+"px",height:a-i-n+"px",width:300}),$(".tableOfContents").css("height",$(".widget_container .side_panel").outerHeight()-o+"px")}else{if(a>=630){$(".page_container").css("height",""),$(".main_content_wrapper").removeClass("notes-minimized-view"),$(".main_content_wrapper").hasClass("assessment-view")===!1&&$(".control_bar_wrapper .notesBtn").addClass("hide"),$(".widget_container .notes").removeClass("hide").css("width",""),s>888?($(".page_container").css("width",""),$(".side_panel").css({"margin-top":-1*r,"border-top":"none",height:"",top:"",width:""}),$(".tableOfContents").css("height",a-n-o-1)):u===!1?($(".widget_container .notes").removeClass("hide"),$(".page_container").css("width","100%"),$(".side_panel").css({"margin-top":0,"border-top":"1px solid #ccc"}),$(".tableOfContents").css("height",a-n-o-$(".page_container").outerHeight()-1)):($(".widget_container .notes").addClass("hide"),$(".page_container").css({width:"",height:a-n-i}),$(".side_panel").css({"margin-top":-1*(a-n-i),"border-top":"none",height:a-n,top:"",width:""}),$(".tableOfContents").css("height",a-n-o-1));var p=$(".page_container .content").outerHeight();$(".widget_container").css("height",a-(n+p)),$(".widget_container .notes").css({height:a-(n+i+p),width:""})}else $(".main_content_wrapper").addClass("notes-minimized-view"),$(".widget_container .notes").addClass("hide").css({width:$(".status").outerWidth(),height:""}),$(".widget_container .notes").hasClass("noNotes")?$(".control_bar_wrapper .notesBtn").addClass("hide"):$(".control_bar_wrapper .notesBtn").removeClass("hide"),$(".page_container").css({width:"",height:a-n-i}),$(".side_panel").css({"margin-top":-1*(a-n-i),"border-top":"none",height:a-n,top:"",width:""}),$(".tableOfContents").css("height",a-n-o-1);var h=$("#menu_panel").outerHeight(),f=$(".menu_item_details .navbar .title").outerHeight(),m=$(".menu_item_details .menu_item_content");m.css("height",h-n-f)}}}var l,u={accent:"#535cab",pageImgFormat:"jpg",analytics:"off",xmlVersion:"3",trackCount:0},c={data:"",trackCount:0},d;return $(document).ready(function(){d=$(".sbplus_wrapper"),$.getJSON($.fn.getConfigFileUrl(),function(t){l=t,e()}).fail(function(){sbplusError.show("Configuration file (manifest.json) is not found!","Please make sure the index.html file is compatible with Storybook Plus version 3.")})}),{render:s,resize:o}}();$.fn.getProgramDirectory=function(){var e=window.location.href.split("/");return($.fn.isEmpty(e[e.length-1])||new RegExp("[?]").test(e[e.length-1]))&&e.splice(e.length-1,1),void 0===e[4]?e[3]:e[4]},$.fn.getRootDirectory=function(){var e=window.location.href.split("/");return($.fn.isEmpty(e[e.length-1])||new RegExp("[?]").test(e[e.length-1])||"index.html"===e[e.length-1])&&e.splice(e.length-1,1),e[e.length-1]},$.fn.getConfigFileUrl=function(){var e=document.getElementById("sbplus_configs");return null===e?!1:e.href},$.fn.isEmpty=function(e){return!e.trim()||0===e.trim().length},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$.fn.cleanString=function(e){return e.replace(/[^\w]/gi,"").toLowerCase()},$.fn.removeExtension=function(e){var t=e.indexOf(".");return e.substr(0,t)},$.fn.haveCoreFeatures=function(){return!!(Modernizr.audio&&Modernizr.video&&Modernizr.json&&Modernizr.flexbox)},$.fn.colorLum=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var s="#",a,n;for(n=0;3>n;n++)a=parseInt(e.substr(2*n,2),16),a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16),s+=("00"+a).substr(a.length);return s},$.fn.toSeconds=function(e){var t=e.split(":");return Number(60*t[0])+Number(t[1])},$.fn.autoscroll=function(e){var t=e[0].clientHeight/2,s=this[0].offsetTop-t;0>s&&(s=0),e.animate({scrollTop:s},500,"linear")},MenuBar.prototype.bindHandlers=function(){var e=this;this.$items.on("mouseenter",function(){return $(this).addClass("menu-hover"),!0}),this.$items.on("mouseout",function(){return $(this).removeClass("menu-hover"),!0}),this.$parents.on("mouseenter",function(t){return e.handleMouseEnter($(this),t)}),this.$parents.on("mouseleave",function(t){return e.handleMouseLeave($(this),t)}),this.$allItems.on("click",function(){return e.handleClick($(this))}),this.$allItems.on("keydown",function(t){return e.handleKeydown($(this),t)}),this.$allItems.on("keypress",function(t){return e.handleKeypress($(this),t)}),this.$allItems.on("focus",function(t){return e.handleFocus($(this),t)}),this.$allItems.on("blur",function(t){return e.handleBlur($(this),t)}),$(document).on("click",function(t){return e.handleDocumentClick(t)})},MenuBar.prototype.handleMouseEnter=function(e){return e.addClass("menu-hover").attr("aria-expanded","true"),"true"===e.attr("aria-haspopup")&&e.children("ul").attr({"aria-hidden":"false","aria-expanded":"true"}),!0},MenuBar.prototype.handleMouseOut=function(e){return e.removeClass("menu-hover").attr("aria-expanded","false"),!0},MenuBar.prototype.handleMouseLeave=function(e){var t=e.find(".menu-focus");return e.removeClass("menu-hover").attr("aria-expanded","false"),t.length>0&&(this.bChildOpen=!1,t.removeClass("menu-focus"),this.$activeItem=e,e.focus()),e.children("ul").attr({"aria-hidden":"true","aria-expanded":"false"}),!0},MenuBar.prototype.handleClick=function(e){var t=e.parent();if(t.is(".root-level")){var s=e.children("ul").first();"false"===s.attr("aria-hidden")?(e.attr("aria-expanded","false"),s.attr({"aria-hidden":"true","aria-expanded":"false"})):(e.attr("aria-expanded","true"),s.attr({"aria-hidden":"false","aria-expanded":"true"}))}else this.$allItems.removeClass("menu-hover menu-focus"),e.attr("aria-expanded","false"),this.$id.find("ul").not(".root-level").attr({"aria-hidden":"true","aria-expanded":"false"})},MenuBar.prototype.handleFocus=function(e){if(null===this.$activeItem)this.$activeItem=e;else if(e[0]!==this.$activeItem[0])return!0;var t=this.$activeItem.parentsUntil("div").filter("li");if(this.$allItems.removeClass("menu-focus"),this.$activeItem.addClass("menu-focus"),t.addClass("menu-focus"),this.vmenu===!0)if(this.bChildOpen===!0){var s=e.parent();s.is(".root-level")&&"true"===e.attr("aria-haspopup")&&(e.attr("aria-expanded","true"),e.children("ul").attr({"aria-hidden":"false","aria-expanded":"true"}))}else this.vmenu=!1;return!0},MenuBar.prototype.handleBlur=function(e){return e.removeClass("menu-focus"),!0},MenuBar.prototype.handleKeydown=function(e,t){if(t.altKey||t.ctrlKey)return!0;var s=e.parent();switch(t.keyCode){case this.keys.tab:e.attr("aria-expanded","false"),this.$id.find("ul").attr({"aria-hidden":"true","aria-expanded":"false"}),this.$allItems.removeClass("menu-focus"),this.$activeItem=null,this.bChildOpen=!1;break;case this.keys.esc:return e.attr("aria-expanded","false"),s.is(".root-level")?e.children("ul").first().attr({"aria-hidden":"true","aria-expanded":"false"}):(this.$activeItem=s.parent(),this.bChildOpen=!1,this.$activeItem.focus(),s.attr({"aria-hidden":"true","aria-expanded":"false"})),t.stopPropagation(),!1;case this.keys.enter:case this.keys.space:var a=e.parent();if(a.is(".root-level"))e.children("ul").first().attr({"aria-hidden":"false","aria-expanded":"true"});else{this.$allItems.removeClass("menu-hover menu-focus"),this.$id.find("ul").not(".root-level").attr({"aria-hidden":"true","aria-expanded":"false"});var n=this.$activeItem.find("a").attr("id");document.getElementById(n).click(),this.$activeItem=null}return t.stopPropagation(),!1;case this.keys.left:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveUp(e):this.$activeItem=this.moveToPrevious(e),this.$activeItem.focus(),t.stopPropagation(),!1;case this.keys.right:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveDown(e):this.$activeItem=this.moveToNext(e),this.$activeItem.focus(),t.stopPropagation(),!1;case this.keys.up:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveToPrevious(e):this.$activeItem=this.moveUp(e),this.$activeItem.focus(),t.stopPropagation(),!1;case this.keys.down:return this.vmenu===!0&&s.is(".root-level")?this.$activeItem=this.moveToNext(e):this.$activeItem=this.moveDown(e),this.$activeItem.focus(),t.stopPropagation(),!1}return!0},MenuBar.prototype.moveToNext=function(e){var t=e.parent(),s=t.children("li"),a=s.length,n=s.index(e),i=null,r=null;if(t.is(".root-level"))i=a-1>n?e.next():s.first(),"true"===e.attr("aria-haspopup")&&(r=e.children("ul").first(),"false"===r.attr("aria-hidden")&&(e.attr("aria-expanded","false"),r.attr({"aria-hidden":"true","aria-expanded":"false"}),this.bChildOpen=!0)),e.removeClass("menu-focus"),"true"===i.attr("aria-haspopup")&&this.bChildOpen===!0&&(r=i.children("ul").first(),e.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"}));else if("true"===e.attr("aria-haspopup"))r=e.children("ul").first(),i=r.children("li").first(),e.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"});else{if(this.vmenu===!0)return e;var o=null,l=null;o=e.parentsUntil("div").filter("ul").not(".root-level"),e.attr("aria-expanded","false"),o.attr({"aria-hidden":"true","aria-expanded":"false"}),o.find("li").removeClass("menu-focus"),o.last().parent().removeClass("menu-focus"),l=o.last().parent(),n=this.$rootItems.index(l),i=n<this.$rootItems.length-1?l.next():this.$rootItems.first(),i.addClass("menu-focus"),"true"===i.attr("aria-haspopup")&&(r=i.children("ul").first(),i=r.children("li").first(),e.attr("aria-expanded","true"),r.attr({"aria-hidden":"false","aria-expanded":"true"}),this.bChildOpen=!0)}return i},MenuBar.prototype.moveToPrevious=function(e){var t=e.parent(),s=t.children("li"),a=s.index(e),n=null,i=null;if(t.is(".root-level"))n=a>0?e.prev():s.last(),"true"===e.attr("aria-haspopup")&&(i=e.children("ul").first(),"false"===i.attr("aria-hidden")&&(e.attr("aria-expanded","false"),i.attr({"aria-hidden":"true","aria-expanded":"false"}),this.bChildOpen=!0)),e.removeClass("menu-focus"),"true"===n.attr("aria-haspopup")&&this.bChildOpen===!0&&(i=n.children("ul").first(),e.attr("aria-expanded","true"),i.attr({"aria-hidden":"false","aria-expanded":"true"}));else{var r=t.parent(),o=r.parent();this.vmenu!==!0&&o.is(".root-level")?(e.attr("aria-expanded","false"),t.attr({"aria-hidden":"true","aria-expanded":"false"}),e.removeClass("menu-focus"),r.removeClass("menu-focus"),a=this.$rootItems.index(r),n=a>0?r.prev():this.$rootItems.last(),n.addClass("menu-focus"),"true"===n.attr("aria-haspopup")&&(i=n.children("ul").first(),e.attr("aria-expanded","true"),i.attr({"aria-hidden":"false","aria-expanded":"true"}),this.bChildOpen=!0,n=i.children("li").first())):(n=t.parent(),e.attr("aria-expanded","false"),t.attr({"aria-hidden":"true","aria-expanded":"false"}),e.removeClass("menu-focus"),this.vmenu===!0&&(this.bChildOpen=!1))}return n},MenuBar.prototype.moveDown=function(e,t){var s=e.parent(),a=s.children("li").not(".separator"),n=a.length,i=a.index(e),r=null,o=null;if(s.is(".root-level"))return"true"!==e.attr("aria-haspopup")?e:(o=e.children("ul").first(),r=o.children("li").first(),$(o.parent()).attr("aria-expanded","true"),e.attr("aria-expanded","true"),o.attr({"aria-hidden":"false","aria-expanded":"true"}),r);if(t){var l=!1,u=i+1;for(u===n&&(u=0);u!==i;){var c=a.eq(u).html().charAt(0);if(c.toLowerCase()===t){l=!0;break}u+=1,u===n&&(u=0)}return l===!0?(r=a.eq(u),e.removeClass("menu-focus"),r):e}return r=n-1>i?a.eq(i+1):a.first(),e.removeClass("menu-focus"),r},MenuBar.prototype.moveUp=function(e){var t=e.parent(),s=t.children("li").not(".separator"),a=s.index(e),n=null;return t.is(".root-level")?e:(n=a>0?s.eq(a-1):s.last(),e.removeClass("menu-focus"),n)},MenuBar.prototype.handleKeypress=function(e,t){if(t.altKey||t.ctrlKey||t.shiftKey)return!0;switch(t.keyCode){case this.keys.tab:return!0;case this.keys.esc:case this.keys.up:case this.keys.down:case this.keys.left:case this.keys.right:return t.stopPropagation(),!1;default:var s=String.fromCharCode(t.which);return this.$activeItem=this.moveDown(e,s),this.$activeItem.focus(),t.stopPropagation(),!1}return!0},MenuBar.prototype.handleDocumentClick=function(){var e=this.$id.find("ul").not(".root-level");return this.$allItems.removeClass("menu-focus"),this.$activeItem=null,!0},$.fn.setLSItem=function(e,t){localStorage.setItem(e,t)},$.fn.getLSItem=function(e){return localStorage.getItem(e)},$.fn.removeLSItem=function(e){localStorage.removeItem(e)},$.fn.hasLSItem=function(e){return null===localStorage.getItem(e)?!1:!$.fn.isEmpty(localStorage.getItem(e))},$.fn.ssSet=function(e,t){sessionStorage.setItem(e,t)},$.fn.ssGet=function(e){return sessionStorage.getItem(e)},$.fn.ssRemove=function(e){sessionStorage.removeItem(e)},$.fn.ssHas=function(e){return null===sessionStorage.getItem(e)?!1:!$.fn.isEmpty(sessionStorage.getItem(e))};var sbplusError=function(){function e(e,n){s=e,a=n,t()}function t(){$(".sbplus_wrapper").html('<div class="error"><h1>'+s+"</h1><p>"+a+"</p></div>")}var s,a;return{show:e}}(),sbplusSplashScreen=function(){function e(e,t,s){o=e,l=t,u=s;var a=$.fn.getProgramDirectory(),n=o.sbplus_root_directory+"images/default.svg",c,d,p;$.get(e.sbplus_root_directory+"scripts/templates/splashscreen.tpl",function(e){i(e),$.ajax({url:"assets/splash.svg",type:"HEAD"}).done(function(){c=this.url,r(c)}).fail(function(){""===l.course?$.ajax({url:o.sbplus_splash_directory+a+"/default.svg",type:"HEAD"}).done(function(){d=this.url,r(d)}).fail(function(){r(n)}):$.ajax({url:o.sbplus_splash_directory+a+"/"+l.course+".svg",type:"HEAD"}).done(function(){p=this.url,r(p)}).fail(function(){$.ajax({url:o.sbplus_splash_directory+a+"/default.svg",type:"HEAD"}).done(function(){d=this.url,r(d)}).fail(function(){r(n)})})})}).fail(function(){sbplusError.show("Template file not found!","splashscreen.tpl file not found in the templates directory.")})}function t(){c.on("click",function(){sbplus.render()}),c.on("mouseover",function(){$(this).children().css("background-color",$.fn.colorLum(u.accent,.2))}).on("mouseout",function(){$(this).children().css("background-color",u.accent)})}function s(){d.on("click",function(){sbplus.render(!0)}),d.on("mouseover",function(){$(this).children().css("background-color",$.fn.colorLum(u.accent,.2))}).on("mouseout",function(){$(this).children().css("background-color",u.accent)})}function a(){c.off("click"),c.off("mouseover"),c.off("mouseout")}function n(){d.off("click"),d.off("mouseover"),d.off("mouseout")}function i(e){var a="sbplus-"+$.fn.getRootDirectory();$(".splashscreen").html(e),$(".splashinfo .title").html(l.title),$.fn.isEmpty(l.subtitle)?$(".splashinfo .subtitle").attr("tabindex",-1):$(".splashinfo .subtitle").html(l.subtitle),$(".splashinfo .author").html(l.author),$(".splashinfo .length").html(l.length),$(".splashinfo .startBtn button").css("background-color",u.accent),$(".splashinfo .resumeBtn button").css("background-color",u.accent),Modernizr.localstorage&&"0:0"!==$.fn.getLSItem(a)&&null!==$.fn.getLSItem(a)&&($(".splashinfo .resumeBtn").css("background-color",u.accent).removeClass("hide"),d=$(".splashinfo .resumeBtn"),s()),c=$(".splashinfo .startBtn"),t(),sbplusDownloadable.get(u.accent)}function r(e){void 0!==e&&$(".splashscreen .splash_background").css({"background-image":"url("+e+")",opacity:0}).animate({opacity:1},500,"linear")}var o,l,u,c,d;return{get:e,unbindStartPresentationBtn:a,unbindResumePresentationBtn:n}}(),sbplusDownloadable=function(){function e(e){l=e;var t=$.fn.getRootDirectory();$.ajax({url:t+".pdf",type:"HEAD",cache:!1}).done(function(){r=this.url,u.pdf=r}).always(function(){$.ajax({url:t+".mp3",type:"HEAD",cache:!1}).done(function(){i=this.url,u.audio=i}).always(function(){$.ajax({url:t+".mp4",type:"HEAD",cache:!1}).done(function(){n=this.url,u.video=n}).always(function(){$.ajax({url:t+".zip",type:"HEAD",cache:!1}).done(function(){o=this.url,u.zip=o}).always(function(){a()})})})})}function t(e,t){return'<div class="dl_item"><a class="'+e+'" href="'+t+'" role="button" tabindex="1" aria-label="Download '+e+' file" download><span class="icon-download"></span> '+e.capitalize()+"</a></div>"}function s(){return u}function a(){var e="",s=$(".download_files").parent(),a=$(".download_files");"undefined"!=typeof n&&(e+=t("video",n)),"undefined"!=typeof i&&(e+=t("audio",i)),"undefined"!=typeof r&&(e+=t("transcript",r)),"undefined"!=typeof o&&(e+=t("supplement",o)),void 0===o&&void 0===r&&void 0===i&&void 0===n?(a.html("No downloadable file available."),setTimeout(function(){s.animate({height:s.outerHeight()-a.outerHeight(!0)},500,"linear"),a.fadeOut()},3e3)):(s.animate({height:s.outerHeight()+a.outerHeight(!1)},500,"linear",function(){$(this).css("height","")}),a.html(e),$(".dl_item").css("background-color",$.fn.colorLum(l,.4)),$(".dl_item").on("mouseover",function(){$(this).css("background-color",$.fn.colorLum(l,.5))}).on("mouseout",function(){$(this).css("background-color",$.fn.colorLum(l,.4))}))}var n,i,r,o,l,u={};return{get:e,getDownloads:s}}(),sbplusSlide=function(){function e(e,s,a,n,i){r="undefined"!=typeof i?i:r,l=s,o=e,v=l.pageImgFormat,1===Number($.fn.getLSItem("sbplus-vjs-enabledSubtitles"))&&(y=!0),t(a,n),sbplusNotes.get(r,o,a,n),sbplus.resize()}function t(e,t){c=$(o[e]).find("page")[t],p=$(c).attr("type"),m="quiz"!==p?$(c).attr("src"):"",i(),$(".main_content_wrapper").removeClass("assessment-view"),$(".page_container .content").removeClass("img-only"),$(".page_container .content").removeClass("audio"),$(".page_container .content").removeClass("html"),null!==g&&(_=!1,x=!1,I=!1,A=!1,S=!1,j=!1,B=[],g.dispose(),g=null),sbplusTableOfContents.update(e,t),s(),Modernizr.localstorage&&(window.clearTimeout(E),E=window.setTimeout(function(){$.fn.setLSItem("sbplus-"+$.fn.getRootDirectory(),e+":"+t)},3e3))}function s(){switch(u=$(".page_container .content"),p){case"image":var e=new Image;e.src="assets/pages/"+m+"."+v,$(e).on("load",function(){u.addClass("img-only").html(e)}),$(e).on("error",function(){u.before('<div class="slideError">Image not found!<br>Expected image: assets/pages/'+m+"."+v+"</div>")});break;case"image-audio":var t="";d="assets/audio/",h="audio/mp3",f=".mp3",S=!0,$.get("assets/pages/"+m+"."+v,function(){t=this.url}).fail(function(){u.before('<div class="slideError">Image not found!<br>Expected image: assets/pages/'+m+"."+v+"</div>")}).always(function(){$.get(d+m+".vtt",function(){b='<track kind="subtitles" label="English" srclang="en" src="'+d+m+'.vtt" '+(y===!0?"default":"")+" />"}).fail(function(){b=""}).always(function(){u.html('<video id="ap" class="video-js vjs-default-skin" webkit-playsinline>'+b+"</video>").promise().done(function(){n()})})});break;case"video":d="assets/video/",h="video/mp4",f=".mp4",j=!0,$.get(d+m+".vtt",function(){b='<track kind="subtitles" label="English" srclang="en" src="'+d+m+'.vtt" '+(y===!0?"default":"")+" />"}).always(function(){u.html('<video id="ap" class="video-js vjs-default-skin" webkit-playsinline>'+b+"</video>").promise().done(function(){n()})});break;case"kaltura":0===k?$.getScript(r.sbplus_root_directory+"/scripts/libs/kaltura/mwembedloader.js",function(){$.getScript(r.sbplus_root_directory+"/scripts/libs/kaltura/kwidgetgetsources.js",function(){k=1,a()})}):a();break;case"youtube":case"vimeo":"youtube"===p?x=!0:I=!0,u.html('<video id="ap" class="video-js vjs-default-skin" webkit-playsinline></video>').promise().done(function(){n()});break;case"html":u.addClass("html").html('<iframe src="assets/html/'+m+'/index.html"></iframe>');break;case"bundle":var s="";d="assets/audio/",h="audio/mp3",f=".mp3",A=!0;var i=$(c).find("frame");i.each(function(){var e=$(this).attr("start");B.push($.fn.toSeconds(e))}),$.get("assets/pages/"+m+"-1."+v,function(){s=this.url}).fail(function(){u.before('<div class="slideError">Image not found!<br>Expected image: assets/pages/'+m+"."+v+"</div>")}).always(function(){$.get(d+m+".vtt",function(){b='<track kind="subtitles" label="English" srclang="en" src="'+d+m+'.vtt" '+(y===!0?"default":"")+" />"}).always(function(){u.html('<video id="ap" class="video-js vjs-default-skin">'+b+"</video>").promise().done(function(){n()})})});break;case"quiz":var o=Number($(".selectable .selected").attr("data-order"));u.html(sbplusQuiz.get(u,c,o)),$("#assessmentSubmitBtn").on("click",function(){var e=$(this).data("id");sbplusQuiz.check(e)})}}function a(){var e,t,s,a="";_=!0,kWidget.getSources({partnerId:r.sbplus_kaltura.id,entryId:m,callback:function(i){e=i.entryId,t=i.captionId,s=i.duration;for(var o in i.sources){var l=i.sources[o];l.flavorParamsId===r.sbplus_kaltura.low&&(C.low=l.src),l.flavorParamsId===r.sbplus_kaltura.normal&&(C.normal=l.src),l.flavorParamsId===r.sbplus_kaltura.high&&(C.high=l.src)}null!==t&&(a='<track kind="subtitles" label="English" srclang="en" src="https://www.kaltura.com/api_v3/?service=caption_captionasset&action=servewebvtt&captionAssetId='+t+"&segmentDuration="+s+'&segmentIndex=1" '+(y===!0?"default":"")+" />"),u.html('<video id="ap" class="video-js vjs-default-skin" crossorigin="anonymous" webkit-playsinline>'+a+"</video>").promise().done(function(){n()})}})}function n(){var e=!0;Modernizr.localstorage&&(e=1===Number($.fn.getLSItem("sbplus-vjs-autoplay")));var t={techOrder:["html5"],controls:!0,autoplay:e,preload:"auto",playbackRates:[.5,1,1.5,2],controlBar:{fullscreenToggle:!1}};if((navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(t.autoplay=!1),_?t.plugins={videoJsResolutionSwitcher:{default:720}}:x?(t.techOrder=["youtube"],t.sources=[{type:"video/youtube",src:"https://www.youtube.com/watch?v="+m}],t.playbackRates=null,t.plugins={videoJsResolutionSwitcher:{default:720}}):I&&(t.techOrder=["vimeo"],t.sources=[{type:"video/vimeo",src:"https://vimeo.com/"+m}],t.playbackRates=null),g=videojs("ap",t,function(){var e=this;if((S||A)&&e.poster("assets/pages/"+m+"."+v),j&&e.poster("assets/video/"+m+"."+v),_?(e.updateSrc([{src:C.low,type:"video/mp4",label:"low",res:360},{src:C.normal,type:"video/mp4",label:"normal",res:720},{src:C.high,type:"video/mp4",label:"high",res:1080}]),e.on("resolutionchange",function(){e.playbackRate(w)}),e.on("ratechange",function(){w=e.playbackRate()})):x===!1&&I===!1&&e.src({type:h,src:d+m+f}),I&&t.autoplay&&e.play(),A){var s,a=new Image;$(".vjs-poster").after('<div class="sbplus-vjs-poster"></div>'),e.on("loadedmetadata",function(){s=Math.floor(e.duration())}),e.cuepoints(),e.addCuepoint({namespace:m+"-1",start:0,end:B[1],onStart:function(){a.src="assets/pages/"+m+"-1."+v,e.poster(a.src)},onEnd:function(){},params:""}),$.each(B,function(t){var n;n=void 0===B[t+1]?s:B[t+1],e.addCuepoint({namespace:m+"-"+(t+2),start:B[t],end:n,onStart:function(){a.src="assets/pages/"+m+"-"+(t+2)+"."+v,$(".sbplus-vjs-poster").css("background-image","url(assets/pages/"+m+"-"+(t+1)+"."+v),e.poster(a.src)}})}),e.on("seeking",function(){e.currentTime()<=B[0]&&($(".sbplus-vjs-poster").css("background-image",""),e.poster("assets/pages/"+m+"-1."+v))})}Modernizr.localstorage&&Modernizr.sessionstorage?(null!==t.playbackRates&&($.fn.ssHas("sbplus-vjs-playbackrate-temp")?e.playbackRate(Number($.fn.ssGet("sbplus-vjs-playbackrate-temp"))):e.playbackRate(Number($.fn.getLSItem("sbplus-vjs-playbackrate")))),$.fn.ssHas("sbplus-vjs-volume-temp")?e.volume(Number($.fn.ssGet("sbplus-vjs-volume-temp"))):e.volume(Number($.fn.getLSItem("sbplus-vjs-volume")))):(e.playbackRate(1),e.volume(.8)),Modernizr.sessionstorage&&(e.on("volumechange",function(){$.fn.ssSet("sbplus-vjs-volume-temp",this.volume())}),e.on("ratechange",function(){$.fn.ssSet("sbplus-vjs-playbackrate-temp",this.playbackRate())})),e.textTracks().addEventListener("change",function(){var e=this.tracks_;$.each(e,function(){return"showing"===this.mode?(y=!0,!1):void(y=!1)})})}),navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){var s=$("video").get(0);makeVideoPlayableInline(s),$(".video-js").removeClass("vjs-using-native-controls"),$(".vjs-loading-spinner").hide()}}function i(){$(".slideError").length&&$(".slideError").remove()}var r,o,l,u,c,d,p,h,f,m,v,g=null,b,w=1,y=!1,k=0,C={},_=!1,x=!1,I=!1,S=!1,j=!1,A=!1,B=[],E;return{get:e}}(),sbplusQuiz=function(){function e(e,s,a){u=e,r=s;var i;if((i=n(a))>=0)l=o[i];else{var c={},d=$(s).find("question");if(c.id=a,c.type=$(s).children()[0].nodeName,c.title={description:d.text()},c.answer=[],c.answered=!1,"multipleChoiceSingle"===c.type||"multipleChoiceMultiple"===c.type){$.fn.isEmpty(d.attr("image"))||(c.title.image=d.attr("image")),$.fn.isEmpty(d.attr("audio"))||(c.title.audio=d.attr("audio"));var p=$(s).find("choices").find("answer");$.each(p,function(){var e=$(this).attr("image"),t=$(this).attr("audio"),s={};s.value=$(this).find("value").text(),$.fn.isEmpty(e)||(s.image=e,s.value=$.fn.removeExtension(e)),$.fn.isEmpty(t)||(s.audio=t,s.value=$.fn.removeExtension(t)),"multipleChoiceSingle"===c.type&&(s.feedback=$(this).find("feedback").text()),"yes"===$(this).attr("correct")&&(s.correct="yes"),c.answer.push(s)})}"fillInTheBlank"===c.type||"multipleChoiceMultiple"===c.type?("fillInTheBlank"===c.type&&(c.answer=$(s).find("answer").text()),c.correctFeedback=$(s).find("correctFeedback").text(),c.incorrectFeedback=$(s).find("incorrectFeedback").text()):"shortAnswer"===c.type&&(c.feedback=$(s).find("feedback").text(),c.answer=""),l=c,o.push(c)}return t()}function t(){if($(".main_content_wrapper").addClass("assessment-view"),!l.answered){var e='<div class="assessment">';switch(l.type){case"shortAnswer":e+='<div class="header"><span class="icon-assessment"></span> Question for Self Assessment: Short Answer</div>',e+='<div class="title">'+l.title.description+"</div>",e+="<textarea></textarea>";break;case"fillInTheBlank":e+='<div class="header"><span class="icon-assessment"></span> Question for Self Assessment: Fill in the Blank</div>',e+='<div class="title">'+l.title.description+"</div>",e+='<input type="text" />';break;case"multipleChoiceSingle":case"multipleChoiceMultiple":e+='<div class="header"><span class="icon-assessment"></span> Question for Self Assessment: Multiple Choice</div>';var t=!1,s=!1,n=!1,i=!1,r=!1,o="radio",u="single";"multipleChoiceMultiple"===l.type&&(r=!0,o="checkbox",u="ma"),void 0!==l.answer[0].image&&(t=!0),void 0!==l.answer[0].audio&&(s=!0),void 0!==l.title.image&&(n=!0),void 0!==l.title.audio&&(i=!0),e+='<div class="title">',e+=l.title.description,n&&(e+='<img src="assets/images/'+l.title.image+'" />'),i&&(e+='<audio controls><source src="assets/audio/'+l.title.audio+'" type="audio/mpeg" /></audio>'),e+="</div>",t?e+='<div class="hasImages">':s&&(e+='<div class="hasAudio">'),$.each(l.answer,function(){var a=$.fn.cleanString(this.value);e+=s?'<label for="'+a+'"><input id="'+a+'" type="'+o+'" name="'+u+'" value="'+a+'" /><audio controls><source src="assets/audio/'+this.audio+'" type="audio/mpeg"/></audio></label>':t?'<label for="'+a+'"><input id="'+a+'" type="'+o+'" name="'+u+'" value="'+a+'" /><img src="assets/images/'+this.image+'" alt="'+this.value+'" /></label>':'<label for="'+a+'"><input id="'+a+'" type="'+o+'" name="'+u+'" value="'+a+'" /> '+this.value+"</label>"}),(t||s)&&(e+="</div>")}return e+='<button id="assessmentSubmitBtn">Submit</button></div>'}a()}function s(){switch(l.stuAnswer="",l.type){case"shortAnswer":l.stuAnswer=$("textarea").val();break;case"fillInTheBlank":l.stuAnswer=$("input").val(),l.stuAnswer!==l.answer?l.correct=!1:l.correct=!0;break;case"multipleChoiceSingle":var e=$('input:radio[name="single"]'),s=e.index(e.filter(":checked"));l.stuAnswer=$('input[type="radio"]:checked').val(),$.each(l.answer,function(){return void 0!==this.correct?(l.stuAnswer===$.fn.cleanString(this.value)?l.correct=!0:l.correct=!1,!0):void 0}),l.stuAnswer=s;break;case"multipleChoiceMultiple":var a=$('input:checkbox[name="ma"]'),n=[];if(l.stuAnswer=[],a.each(function(e){if(this.checked){var t={};t.value=$(this).val(),t.index=e,l.stuAnswer.push(t);
}}),$.each(l.answer,function(e){void 0!==this.correct&&n.push(e)}),l.stuAnswer.length<n.length||l.stuAnswer.length>n.length)l.correct=!1;else if(l.stuAnswer.length===n.length)for(var r=0;r<l.stuAnswer.length;r++){if(!($.inArray(l.stuAnswer[r].index,n)>=0)){l.correct=!1;break}l.correct=!0}}$.isArray(l.stuAnswer)?l.stuAnswer.length>=1?(l.answered=!0,t()):i():""!==l.stuAnswer&&-1!==l.stuAnswer?(l.answered=!0,t()):i()}function a(){var e='<div class="assessment">';e+='<div class="header"><span class="icon-assessment"></span> Feedback for Self Assessment</div>',l.correct?e+='<div class="correctStatus"><span class="icon-check"></span> Correct!</div>':l.correct===!1&&(e+='<div class="incorrectStatus"><span class="icon-warning"></span> Incorrect!</div>');var t=!1,s=!1;switch($.isArray(l.answer)&&void 0!==l.answer[0].image&&(a=!0),void 0!==l.title.image&&(t=!0),void 0!==l.title.audio&&(s=!0),e+='<div class="title">',e+=l.title.description,t&&(e+='<img src="assets/images/'+l.title.image+'" />'),s&&(e+='<audio controls><source src="assets/audio/'+l.title.audio+'" type="audio/mpeg" /></audio>'),e+="</div>",e+='<div class="content">',l.type){case"shortAnswer":e+="<p><strong>Your answer:</strong><br>"+l.stuAnswer+"</p>",e+="<p><strong>Feedback:</strong><br>"+l.feedback+"</p>";break;case"fillInTheBlank":e+="<p><strong>Your answer:</strong><br>"+l.stuAnswer+"</p>",e+="<p><strong>Correct answer:</strong><br>"+l.answer+"</p>",e+=l.correct?"<p><strong>Feedback:</strong><br>"+l.correctFeedback+"</p>":"<p><strong>Feedback:</strong><br>"+l.incorrectFeedback+"</p>";break;case"multipleChoiceSingle":var a=!1,n=!1;void 0!==l.answer[0].image&&(a=!0),void 0!==l.answer[0].audio&&(n=!0),e+=a?'<p><strong>Your answer:</strong><br><img src="assets/images/'+l.answer[l.stuAnswer].image+'" alt="'+l.answer[l.stuAnswer].value+'" /></p>':n?'<p><strong>Your answer:</strong><br><audio controls><source src="assets/audio/'+l.answer[l.stuAnswer].audio+'" type="audio/mpeg" /></audio></p>':"<p><strong>Your answer:</strong><br>"+l.answer[l.stuAnswer].value+"</p>",$.each(l.answer,function(){return void 0!==this.correct?(e+=a?'<p><strong>Correct answer:</strong><br><img src="assets/images/'+this.image+'" alt="'+this.value+'" /></p>':n?'<p><strong>Correct answer:</strong><br><audio controls><source src="assets/audio/'+this.audio+'" type="audio/mpeg" /></audio></p>':"<p><strong>Correct answer:</strong><br>"+this.value+"</p>",!0):void 0}),e+="<p><strong>Feedback:</strong><br>"+l.answer[l.stuAnswer].feedback+"</p>";break;case"multipleChoiceMultiple":var a=!1,n=!1;void 0!==l.answer[0].image&&(a=!0),void 0!==l.answer[0].audio&&(n=!0),e+="<p><strong>Your answer:</strong></p>",e+=a?'<ul class="images">':n?'<ul class="audio">':"<ul>",$.each(l.stuAnswer,function(){e+=a?'<li><img src="assets/images/'+l.answer[this.index].image+'" alt="'+l.answer[this.index].value+'" /></li>':n?'<li><audio controls><source src="assets/audio/'+l.answer[this.index].audio+'" type="audio/mpeg" /></audio></li>':"<li>"+l.answer[this.index].value+"</li>"}),e+="</ul>",e+="<p><strong>Correct answer:</strong></p>",e+=a?'<ul class="images">':n?'<ul class="audio">':"<ul>",$.each(l.answer,function(){void 0!==this.correct&&(e+=a?'<li><img src="assets/images/'+this.image+'" alt="'+this.value+'" /></li>':n?'<li><audio controls><source src="assets/audio/'+this.audio+'" type="audio/mpeg" /></audio></li>':"<li>"+this.value+"</li>")}),e+="</ul>",e+=l.correct?"<p><strong>Feedback:</strong><br>"+l.correctFeedback+"</p>":"<p><strong>Feedback:</strong><br>"+l.incorrectFeedback+"</p>"}return e+="</div></div>",u.html(e),sbplus.resize(),!1}function n(e){var t=-1;return $.each(o,function(s){return this.id===e?(t=s,!0):void 0}),t}function i(){$(".assessment .header").after('<div class="error"><span class="icon-warning"></span> Please answer the question before submitting.'),setTimeout(function(){$(".assessment .error").remove()},5e3)}var r,o=[],l={},u;return{get:e,check:s}}(),sbplusTableOfContents=function(){function e(e,s){i=s,n=e,t()}function t(){var e=$(".tableOfContents");$.each(n.section,function(t){var s=$(this).find("page"),a=$.fn.isEmpty($(this).attr("title"))?"Section "+(t+1):$(this).attr("title");e.append('<div class="section"><div class="header"><div class="title" tabindex="1">'+a+'</div><div class="expandCollapseIcon"><span class="icon-collapse"></span></div></div><div class="content"><ul class="selectable">'),$.each(s,function(e){$(".selectable:eq("+t+")").append('<li tabindex="1" class="selectee" data-section="'+t+'" data-page="'+e+'" data-order="'+n.trackCount+'">'+("quiz"!==$(this).attr("type")?'<span class="num">'+(n.trackCount+1)+".</span> ":'<span class="icon-assessment"></span> ')+$(this).attr("title")+"</li>"),n.trackCount++}),e.append("</ul></div></div>")}),s()}function s(){var e=$(".tableOfContents .section .header"),t=$(".selectable .selectee");n.section.length>=2?e.on("click",function(){var e=$(this).parent().find(".content"),t=$(this).parent().find(".expandCollapseIcon").find("span");$(e).is(":visible")?e.slideUp(250,function(){$(t).removeClass("icon-collapse").addClass("icon-open")}):e.slideDown(250,function(){$(t).removeClass("icon-open").addClass("icon-collapse")})}):e.remove(),t.on("click",function(){if(n.section.length>=2){var e=$(this).parent().parent().prev();$(".header").removeClass("current"),$(e).addClass("current")}$(this).hasClass("selected")||sbplusSlide.get(n.section,i,$(this).data("section"),$(this).data("page")),t.removeClass("selected"),$(this).addClass("selected")})}function a(e,t){var s=$(".section .header:eq("+e+")"),a=$(".section:eq("+e+') .selectee[data-page="'+t+'"]');$(".header").removeClass("current"),$(".selectee").removeClass("selected"),s.addClass("current"),a.addClass("selected"),$(".sr-PageStatus .pageTitle").html($($(n.section[e]).find("page")[t]).attr("title")),$(".sr-PageStatus .currentPage").html(Number(a.data("order"))+1),setTimeout(function(){sbplusControls.update(a.data("order")),$(".selectable .selectee.selected").autoscroll($(".side_panel .tableOfContents"))},250)}var n,i;return{get:e,update:a}}(),sbplusControls=function(){function e(e,t){i=e,r=t,l=$(i).find("page").length,o=$(i).length,$(".control_bar_wrapper .next").on("click",function(){var e=Number($(".selectee.selected").data("section")),t=$(i[e]).find("page").length,s=Number($(".selectee.selected").data("page"));u=Number($(".selectee.selected").data("order")),t-1>s?s++:(s=0,o-1>e&&e++),u++,u>l-1&&(s=0,e=0,u=0),sbplusSlide.get(i,r,e,s)}),$(".control_bar_wrapper .previous").on("click",function(){var e=Number($(".selectee.selected").data("section")),t=$(i[e]).find("page").length,s=Number($(".selectee.selected").data("page"));u=Number($(".selectee.selected").data("order")),t>s&&s>0?(s--,u--):(e--,0>e&&(e=o-1),s=$(i[e]).find("page").length-1,u=s),sbplusSlide.get(i,r,e,s)}),$(".control_bar_wrapper .expandContractBtn").on("click",function(){var e=$(".page_container"),t=$(".control_bar_wrapper .notesBtn"),s=$(".control_bar_wrapper .tocBtn"),n=e.hasClass("expanded"),i=$(".notes, .side_panel"),r=$(this).find("span"),o=$(".main_content_wrapper");n?(e.removeClass("expanded").addClass("aspect-ratio").css("height","auto"),t.addClass("hide"),s.addClass("hide"),i.removeClass("hide"),r.removeClass("icon-contract").addClass("icon-expand"),o.removeClass("full-view"),a(),$(".control_bar_wrapper .expandOnly .tocBtn").removeClass("active"),$(".widget_container .side_panel").css("right","")):(e.addClass("expanded").removeClass("aspect-ratio"),$(".left_side .notes").hasClass("noNotes")===!1&&t.removeClass("hide"),s.removeClass("hide"),i.addClass("hide"),r.removeClass("icon-expand").addClass("icon-contract"),o.addClass("full-view")),sbplus.resize()}),$(".control_bar_wrapper .notesBtn").on("click",function(){var e=this,t=$(".widget_container .notes");t.hasClass("hide")?t.removeClass("hide").animate({top:"-250px"},250,function(){$(e).addClass("active")}):t.animate({top:"40px"},250,function(){t.addClass("hide"),$(e).removeClass("active")})}),$(".control_bar_wrapper .tocBtn").on("click",function(){var e=this,t=$(".widget_container .side_panel");t.hasClass("hide")?t.removeClass("hide").animate({right:"0"},250,function(){$(e).addClass("active")}):t.animate({right:-1*t.outerWidth()+"px"},250,function(){t.addClass("hide"),$(e).removeClass("active")})}),n()}function t(e){var t=$(".downloadFiles");void 0!==e.video&&t.append('<li class="menu-item" tabindex="-1" role="menuitem" aria-live="polite"><a id="dl-video" href="'+e.video+'" target="_blank" download>Video</a></li>'),void 0!==e.audio&&t.append('<li class="menu-item" tabindex="-1" role="menuitem" aria-live="polite"><a id="dl-audio" href="'+e.audio+'" target="_blank" download>Audio</a></li>'),void 0!==e.pdf&&t.append('<li class="menu-item" tabindex="-1" role="menuitem" aria-live="polite"><a id="dl-pdf" href="'+e.pdf+'" target="_blank" download>Transcript</a></li>'),void 0!==e.zip&&t.append('<li class="menu-item" tabindex="-1" role="menuitem" aria-live="polite"><a id="dl-zip" href="'+e.zip+'" target="_blank" download>Supplement</a></li>');var s=new MenuBar("mb1",!1);s=s}function s(e){e="undefined"!=typeof e?e:u,$(".control_bar_wrapper .status .current").html(e+1)}function a(){$(".control_bar_wrapper .notesBtn").removeClass("active"),$(".full-view .widget_container .notes").css("top","40px").addClass("hide")}function n(){s(),$(".control_bar_wrapper .status .total").html(l),$(".sr-PageStatus .totalPages").html(l);var e=sbplusDownloadable.getDownloads();void 0===e.video&&void 0===e.pdf&&void 0===e.audio&&void 0===e.zip?$(".control_bar_wrapper .downloadsMenu_wrapper").hide():t(e)}var i,r,o=0,l=0,u=0;return{init:e,update:s,resetNote:a}}(),sbplusNotes=function(){function e(e,n,i,r){s=n,a=e,t(i,r)}function t(e,t){var i=$(s[e]).find("page")[t],r=$(i).find("note").text(),o=$(".widget_container .notes"),l=$(".control_bar_wrapper .notesBtn"),u=$(document).width(),c=$(document).height();if($.fn.isEmpty(r)){var d=a.sbplus_logo_directory+$.fn.getProgramDirectory()+".svg",p=new Image;o.html("").addClass("noNotes").attr("tabindex",-1),$(".sr-PageStatus .hasNotes").html(""),0===n.length?(p.src=d,$(p).on("load",function(){n=p,o.html(p)}),$(p).on("error",function(){n='<img src="'+a.sbplus_logo_directory+a.sbplus_logo_default+'.svg" />',o.html(n)})):o.html(n),414>=u&&736>=c&&(l.addClass("hide"),o.addClass("hide")),l.addClass("hide"),sbplusControls.resetNote()}else o.removeClass("noNotes").attr("tabindex",1).html(r),$(".main_content_wrapper").hasClass("full-view")&&l.removeClass("hide"),414>=u&&736>=c&&(o.addClass("hide"),l.removeClass("hide")),$(".sr-PageStatus .hasNotes").html("This page contains notes.")}var s,a,n="";return{get:e}}(),sbplusMenu=function(){function e(e,s){u=e,l=s,t()}function t(){s()}function s(){$(".menuBtn").on("click",function(){return $(this).attr("aria-expanded","true"),$("#menu_panel").removeClass("hide").attr("aria-expanded","true"),!1}),$(".backBtn").on("click",function(){return n(),!1}),$(".closeBtn").on("click",function(){return $(".menuBtn").attr("aria-expanded","false"),$("#menu_panel").addClass("hide").attr("aria-expanded","false"),n(),!1}),$("#showProfile").on("click",a),$("#showGeneralInfo").on("click",a),$("#showHelp").on("click",a),$("#showSettings").on("click",a)}function a(){var e,t="",s="#"+this.id,a=this;switch(s){case"#showProfile":var r=l.data.find("setup").find("author"),o=r.attr("name");if(e="Author Profile",$.fn.isEmpty(r.text()))if(0===d.length){var f=u.sbplus_author_directory+$.fn.cleanString(o);$.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",jsonpCallback:"author",url:f+".json"}).done(function(t){d=t;var s=new Image;s.src=f+".jpg",$(s).on("load",function(){h='<div class="profileImg"><img src="'+f+'.jpg" alt="Photo of '+t.name+'" /></div>',p='<p class="name">'+t.name+"</p>"+t.profile,n(a,e,p)}),$(s).on("error",function(){p='<p class="name">'+t.name+"</p>"+t.profile,n(a,e,p)})}).fail(function(){var t='<p style="color:#f00;">No author profile found for '+o+".</p>";n(a,e,t)})}else t=p;else t=r.text();break;case"#showGeneralInfo":e="General Information",t=l.generalInfo;break;case"#showHelp":e="Help",t=u.sbplus_help_information;break;case"#showSettings":e="Settings",Modernizr.localstorage?0===c.length?$.get(u.sbplus_root_directory+"scripts/templates/settings.tpl",function(t){c=t,n(a,e,t),i()}):(t=c,i()):t='<p style="color:#f00;">Your web browser does not local storage to store setting data.</p>';break;default:e="",t=""}return""!==e&&""!==t&&n(a,e,t),!1}function n(e,t,s){var a=$("#menu_panel"),n=$(".menu_item_details"),i=$(".menu_item_details .navbar .title"),l=$(".menu_item_details .menu_item_content");return"undefined"==typeof e?($(".menu_item a").attr("aria-expanded","false"),n.attr("aria-expanded","false").animate({right:"-100%"},250,function(){$(this).addClass("hide")}),void o()):($(e).attr("aria-expanded","true"),n.attr("aria-expanded","true"),i.html(t),l.html('<div class="content">'+s+"</div>"),"showProfile"===$(e)[0].id?l.html(h+'<div class="content">'+s+"</div>"):l.html('<div class="content">'+s+"</div>"),n.removeClass("hide").animate({right:"0px"},250),"showSettings"===$(e)[0].id&&r(),void l.css("height",a.outerHeight()-$(".title_bar").outerHeight()-i.outerHeight()))}function i(){var e=$.fn.getLSItem("sbplus-vjs-autoplay");"1"===e?$("#autoplay").prop("checked",!0):$("#autoplay").prop("checked",!1);var t=$.fn.getLSItem("sbplus-vjs-volume");$("#volume").prop("value",100*t);var s=$.fn.getLSItem("sbplus-vjs-playbackrate");$("#playback").val(s);var a=$.fn.getLSItem("sbplus-vjs-enabledSubtitles");"1"===a?$("#subtitle").prop("checked",!0):$("#subtitle").prop("checked",!1)}function r(){$("#saveSettingBtn").on("click",function(e){var t=$(this),s=!1;t.prop("disabled",!0).html("Saving..."),$("#autoplay").is(":checked")?$.fn.setLSItem("sbplus-vjs-autoplay",1):$.fn.setLSItem("sbplus-vjs-autoplay",0);var a=$("#volume").val();return 0>a||a>100||""===a?(s=!0,a=8):$.fn.setLSItem("sbplus-vjs-volume",a/100),$.fn.setLSItem("sbplus-vjs-playbackrate",$("#playback option:selected").val()),$("#subtitle").is(":checked")?$.fn.setLSItem("sbplus-vjs-enabledSubtitles",1):$.fn.setLSItem("sbplus-vjs-enabledSubtitles",0),s?($("#volume").parent().parent().addClass("invalid"),$("#volume").parent().after('<p class="emsg">Must be between 0 to 100.</p>')):($("#volume").parent().parent().removeClass("invalid"),$(".emsg").remove()),setTimeout(function(){i(),t.html("Settings Saved!"),setTimeout(function(){t.prop("disabled",!1).html("Save")},2e3)},1e3),e.preventDefault(),!1})}function o(){$("#saveSettingBtn").unbind()}var l,u,c="",d="",p,h="";return{get:e}}();
//# sourceMappingURL=./sbplus.js.map