$default-font-size: 16px;
$default-font-family: Helvetica, Arial, sans-serif;
$font-color: #333;
$border-color: #ccc;
$link-color: #18b8f7;
$gutter: 16px;

@import "compass/reset";
@import "compass/css3/box-sizing";
@import "compass/utilities/general/clearfix";
@import "compass/css3/flexbox";
@import "compass/css3/transform";

@import "../fonts/sbplus_fonts.css";

//mixins

@mixin aspect-ratio( $width, $height ) {
    
    position: relative;
    
    &:before {
        
        display: block;
        content: "";
        width: 100%;
        padding-top: ( $height / $width ) * 100%;
        
    }
    
    > .sbplus {
        
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        
    }
    
}

// functions

@function rem( $px, $base: $default-font-size ) {
    
    @return ( $px / $base ) * 1rem;
    
}

// general rules

* {
    
    @include box-sizing( border-box );
    
}

html {
    
    font-size: $default-font-size;
    margin: 0;
    padding: 0;
    
}

body {
    
    @extend html;
    
    font-family: $default-font-family;
	line-height: rem( 16px );
	color: $font-color;

}

h1, h2, h3, h4, h5, h6, p, blockquote, ol, ul, li {
    
    margin: rem( $gutter ) 0;
    
}

ul {
    
    list-style: disc;
    margin-left: rem( 25px );
    
}

a, a:visited {
                        
    color: $link-color;
    text-decoration: none;
    
}

a:hover {
    
    text-decoration: underline;
    
}

strong {
    
    font-weight: bold;
    
}

button {
    
    padding: rem( 10px ) rem( 12px );
    font-size: rem( 18px );
    font-family: $default-font-family;
    line-height: normal;
    color: #fff;
    border: 0;
    cursor: pointer;
    outline: none;
    
}

noscript {
    
    h1 {
        
        font-size: rem( 24px );
        line-height: rem( 32px );
        
    }
    
    p {
        
        line-height: rem( 22px );
        
    }   
    
}

// misc
.sr-only {
    
    display: none;
    
}

// storybook plus rules

.sbplus_wrapper {
    
    .notSupportedMsg {
        
        padding: rem( 5px ) rem( 20px ) 0;
        
        h1 {
            
            font-size: rem( 24px );
            line-height: normal;
            font-weight: bold;
            color: #bc0909;
            
        } 
        
        p {
            
            font-size: rem( $default-font-size );
            line-height: normal;
            
        }
        
    }
    
    .sbplus {
        
        position: relative;
        margin: 0 auto;
        overflow: hidden;
        
        .main_content_wrapper {
            
            .title_bar {
            
                height: rem( 30px );
                color: #fff;
                background-color: $font-color;
                
                .title {
                    
                    line-height: rem( 30px );
                    padding: 0 0 0 rem( 15px );
                    white-space: nowrap;
                    text-overflow: ellipsis;
                    overflow: hidden;
                    
                }
                
                .author {
                    
                    @extend .title;
                    
                    border-right: rem( 1px ) solid $border-color;
                    
                }
                
                .menu {
                    
                    @extend .title;
    
                    height: rem( 30px );
                    text-align: center;
                    border: none;
                    color: #fff;
                    padding: 0;
                    background-color: transparent;
                    
                    [class^="icon-"] {
                        
                        font-size: rem( 16px );
                        line-height: rem( 30px );
                        
                    }
                    
                }
                
                .menu:hover {
                    
                    [class^="icon-"] {
                        
                        color: $link-color;
                        
                    }
                    
                }
                
                .menu:focus {
                    
                    outline: none;
                    
                }
                
            } // end title bar
            
            .main_content {
                
                border: rem( 1px ) solid $border-color;
                border-top: none;
                
                .notes {
                
                    border-top: rem( 1px ) solid $border-color;
                
                } // end note
                
                .control_bar_wrapper {
                
                    border-top: rem( 1px ) solid $border-color;
                
                } // end control bar wrapper
                
            } // end main content
            
            .toc {
                
                border-right: rem( 1px ) solid $border-color;
                border-bottom: rem( 1px ) solid $border-color;
                
            } // end table of content
            
        } // end main content wrapper
        
        .splashscreen {
            
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            background-position: center center;
            z-index: 0;
            
            @include transform-style( preserve-3d );
            
            .splashinfo {
                
                position: relative;
                top: 50%;
                padding: 0 rem( 200px );
                @include translateY( -50% );
                
                .title {
                    
                    font-weight: bold;
                    font-size: rem( 20px );
                    line-height: rem( 26px );
                    margin: 0;
                    
                }
                
                .subtitle {
                    
                    font-size: rem( 18px );
                    line-height: rem( 24px );
                    line-height: normal;
                    margin-top: 0;
                    margin-bottom: rem( $gutter );
                    
                }
                
                .author {
                    
                    margin-top: 0;
                    margin-bottom: rem( $gutter );
                    
                }
                
                .length {
                    
                    margin-top: 0;
                    margin-bottom: rem( $gutter );
                    
                }
                
                .startBtn {
                    
                    margin: 0;
                    background-color: #535cab;
                    padding-right: rem( 24px );
                    padding-left: rem( 24px );
                    
                }
                
            }
            
        }
        
        .errorscreen {
            
            @extend .splashscreen;
            background-color: rgba(255, 255, 255, 0.85);
            z-index: 1;
            
            .content {
                
                text-align: center;
                
                .title {
                    
                    font-size: rem( 24px );
                    line-height: rem( 24px );
                    margin-bottom: rem( $gutter );
                }
                
                .msg {
                    
                    line-height: rem( $default-font-size + 4 );
                    
                }
                
            }
            
        }
        
        .errorscreen.hide {
            
            display: none;
            
        }
        
    } // end sbplus
    
} // end sbplus wrapper

// device width over 900 pixels
@media only screen
and (min-width: 900px) {
    
    // if device does support flexbox
    .flexbox {
        
        .sbplus_wrapper {
            
            .sbplus {
                
                width: rem( 900px );
                height: rem( 590px );
                
                .main_content_wrapper {
                    
                    @include display-flex( flex );
                    @include flex-direction( row );
                    @include flex-wrap( wrap );
                    
                    .title_bar {
                    
                        @include display-flex( flex );
                        @include flex-direction( row );
                        @include flex-wrap( nowrap );
                        @include order( 1 );
                        
                        width: rem( 900px );
                        
                        .title {
                            
                            width: rem( 640px );
                            @include order( 1 );
                            
                        }
                        
                        .author {
                            
                            width: rem( 220px );
                            @include order( 2 );
                            
                        }
                        
                        .menu {
                            
                            width: rem( 40px );
                            @include order( 3 );
                            
                        }
                        
                    } // end title bar
                    
                    .main_content {
                        
                        width: rem( 640px );
                        height: rem( 560px );
                        
                        @include display-flex( flex );
                        @include flex-direction( column );
                        @include flex-wrap( nowrap );
                        @include order( 2 );
                        
                        .slide {
                        
                            height: rem( 359px );
                            @include order( 1 );
                        
                        }
                        
                        .notes {
                        
                            height: rem( 160px );
                            @include order( 2 );
                        
                        }
                        
                        .control_bar_wrapper {
                        
                            height: rem( 40px );
                            @include order( 3 );
                        
                        }
                        
                    }
                    
                    .toc {
                        
                        @include order( 3 );
                        
                        width: rem( 260px );
                        height: rem( 560px );
                        
                    } // end table of content
                    
                } // end main content wrapper
                
                .main_content_wrapper.hide {
            
                    display: none;
                    
                }
                
                .errorscreen {
            
                    @include display-flex( flex );
                    @include flex-direction( column );
                    @include justify-content( center );
                    
                } // end error screen
                
                .errorscreen.hide {
                    
                    display: none;
                    
                }
                
            } // end sbplus
            
        } // end sbplus wrapper
        
    } // end flexbox
    
    // if the device does not support flexbox
    .no-flexbox {
        
        .sbplus_wrapper {
            
            .sbplus {
                
                width: rem( 900px );
                height: rem( 590px );
                
                .main_content_wrapper {
                    
                    width: 100%;
                    height: rem( 590px );
                    
                    @include clearfix();
                    
                    .title_bar {
                    
                        width: 100%;
                        
                        .title {
                            
                            width: rem( 640px );
                            float: left;
                            
                        }
                        
                        .author {
                            
                            width: rem( 220px );
                            float: left;
                            
                        }
                        
                        .menu {
                            
                            width: rem( 40px );
                            float: left;
                            
                        }
                        
                    } // end title bar
                    
                    .main_content {
                        
                        width: rem( 640px );
                        float: left;
                        
                        .slide {
                        
                            width: rem( 638px );
                            height: rem( 359px );
                            float: left;
                        
                        }
                        
                        .notes {
                        
                            width: rem( 638px );
                            height: rem( 160px );
                            float: left;
                        
                        }
                        
                        .control_bar_wrapper {
                        
                            width: rem( 638px );
                            height: rem( 40px );
                            float: left;
                            clear: both;
                        
                        }
                        
                    } // end main content wrapper
                    
                    .toc {
                        
                        width: rem( 260px );
                        height: rem( 560px );
                        float: left;
                        
                    } // end table of content
                    
                } // end main content wrapper
                
                .errorscreen {
                    
                    .content {
                        
                        position: absolute;
                        top: 50%;
                        width: 100%;
                        transform: translateY(-50%);
                        
                    }
                    
                }
                
            } // end sbplus
            
        } // end sbplus wrapper
        
    } // end no flexbox
    
}